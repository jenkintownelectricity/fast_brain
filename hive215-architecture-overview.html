<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIVE215 Architecture Evolution</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --secondary: #10b981;
            --accent: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            --darker: #020617;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-hover: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--darker);
            color: #e2e8f0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(16, 185, 129, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(245, 158, 11, 0.05) 0%, transparent 70%);
            animation: pulse 15s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        /* Grid Lines */
        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-image: 
                linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 60px;
        }

        .logo {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            letter-spacing: -2px;
        }

        .tagline {
            font-size: 1.2rem;
            color: #94a3b8;
            font-weight: 300;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
            padding: 20px 30px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            backdrop-filter: blur(10px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary);
        }

        .stat-value.warning { color: var(--accent); }
        .stat-value.danger { color: var(--danger); }
        .stat-value.primary { color: var(--primary); }

        .stat-label {
            font-size: 0.85rem;
            color: #64748b;
            margin-top: 5px;
        }

        /* Section Title */
        .section-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 30px;
            background: linear-gradient(180deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        /* Glass Card */
        .glass-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 30px;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            background: var(--glass-hover);
            border-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        /* Comparison Section */
        .comparison {
            display: grid;
            grid-template-columns: 1fr 100px 1fr;
            gap: 20px;
            margin-bottom: 60px;
        }

        @media (max-width: 1200px) {
            .comparison {
                grid-template-columns: 1fr;
            }
            .comparison-arrow {
                transform: rotate(90deg);
            }
        }

        .architecture-card {
            position: relative;
        }

        .architecture-card.old {
            border-color: rgba(239, 68, 68, 0.3);
        }

        .architecture-card.new {
            border-color: rgba(16, 185, 129, 0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--glass-border);
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .card-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-old {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
        }

        .badge-new {
            background: rgba(16, 185, 129, 0.2);
            color: #6ee7b7;
        }

        /* Flow Diagram */
        .flow {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .flow-step {
            position: relative;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            margin-bottom: 8px;
            border-left: 3px solid transparent;
        }

        .flow-step.highlight {
            background: rgba(99, 102, 241, 0.1);
            border-left-color: var(--primary);
        }

        .flow-step.noise-cancel {
            background: rgba(16, 185, 129, 0.1);
            border-left-color: var(--secondary);
        }

        .flow-step.turn-detect {
            background: rgba(245, 158, 11, 0.1);
            border-left-color: var(--accent);
        }

        .flow-step.brain {
            background: rgba(168, 85, 247, 0.1);
            border-left-color: #a855f7;
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .step-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .step-location {
            font-size: 0.7rem;
            padding: 3px 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            color: #94a3b8;
        }

        .step-details {
            display: flex;
            gap: 15px;
            font-size: 0.8rem;
            color: #94a3b8;
        }

        .latency {
            color: var(--accent);
            font-weight: 500;
        }

        .cost {
            color: var(--secondary);
            font-weight: 500;
        }

        .flow-connector {
            width: 2px;
            height: 20px;
            background: linear-gradient(180deg, var(--glass-border), transparent);
            margin: 0 auto;
        }

        /* Arrow */
        .comparison-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .arrow-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 0 40px rgba(99, 102, 241, 0.3);
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.3); }
            50% { box-shadow: 0 0 60px rgba(99, 102, 241, 0.5); }
        }

        /* Totals */
        .totals {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--glass-border);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.9rem;
        }

        .total-row.final {
            font-weight: 700;
            font-size: 1.1rem;
            color: #fff;
            padding-top: 15px;
            margin-top: 10px;
            border-top: 1px solid var(--glass-border);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 40px 0;
            padding: 20px;
            background: var(--glass);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.85rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .legend-color.noise { background: var(--secondary); }
        .legend-color.turn { background: var(--accent); }
        .legend-color.brain { background: #a855f7; }
        .legend-color.transport { background: var(--primary); }

        /* Migration Section */
        .migration-section {
            margin-top: 60px;
        }

        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .migration-step {
            position: relative;
            padding-left: 60px;
        }

        .step-number {
            position: absolute;
            left: 0;
            top: 0;
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .step-content h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .step-content p {
            font-size: 0.85rem;
            color: #94a3b8;
            line-height: 1.6;
        }

        .step-content code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            color: var(--secondary);
        }

        /* Checklist */
        .checklist {
            margin-top: 15px;
        }

        .check-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            font-size: 0.85rem;
            color: #94a3b8;
        }

        .check-box {
            width: 20px;
            height: 20px;
            border: 2px solid var(--glass-border);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .check-box:hover {
            border-color: var(--secondary);
        }

        .check-box.checked {
            background: var(--secondary);
            border-color: var(--secondary);
        }

        .check-box.checked::after {
            content: 'âœ“';
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
        }

        /* Progress Bar */
        .progress-section {
            margin: 40px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .progress-title {
            font-weight: 600;
        }

        .progress-percent {
            color: var(--secondary);
            font-weight: 700;
        }

        .progress-bar {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 6px;
            transition: width 0.5s ease;
            width: 0%;
        }

        /* Achievements */
        .achievements {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .achievement {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px 20px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .achievement.unlocked {
            opacity: 1;
            border-color: var(--accent);
            background: rgba(245, 158, 11, 0.1);
        }

        .achievement-icon {
            font-size: 1.5rem;
        }

        .achievement-info h4 {
            font-size: 0.9rem;
            font-weight: 600;
        }

        .achievement-info p {
            font-size: 0.75rem;
            color: #64748b;
        }

        /* Pricing Calculator */
        .pricing-section {
            margin-top: 60px;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .pricing-card {
            padding: 30px;
        }

        .pricing-card h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pricing-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.9rem;
        }

        .pricing-row:last-child {
            border-bottom: none;
        }

        .pricing-row .label {
            color: #94a3b8;
        }

        .pricing-row .value {
            font-weight: 600;
        }

        .pricing-row.total {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--glass-border);
            font-size: 1.1rem;
        }

        .pricing-row.total .value {
            color: var(--secondary);
        }

        .pricing-row.savings {
            color: var(--secondary);
        }

        /* Code Block */
        .code-block {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .code-block pre {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.8rem;
            line-height: 1.6;
            color: #e2e8f0;
        }

        .code-block .comment { color: #64748b; }
        .code-block .keyword { color: #c084fc; }
        .code-block .string { color: #4ade80; }
        .code-block .function { color: #60a5fa; }

        /* Final CTA */
        .cta-section {
            text-align: center;
            margin-top: 80px;
            padding: 60px 40px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(16, 185, 129, 0.1));
            border-radius: 24px;
            border: 1px solid var(--glass-border);
        }

        .cta-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .cta-subtitle {
            font-size: 1.1rem;
            color: #94a3b8;
            margin-bottom: 30px;
        }

        .cta-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 32px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .btn-secondary {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            color: white;
        }

        .btn-secondary:hover {
            background: var(--glass-hover);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .logo { font-size: 2.5rem; }
            .stats-bar { gap: 15px; }
            .stat { padding: 15px 20px; }
            .stat-value { font-size: 1.5rem; }
            .section-title { font-size: 1.5rem; }
            .glass-card { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    <div class="grid-overlay"></div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="logo">HIVE215</h1>
            <p class="tagline">Voice AI Architecture Evolution â€” From Complex to Simple</p>
        </header>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat">
                <div class="stat-value danger">7</div>
                <div class="stat-label">Network Hops (Old)</div>
            </div>
            <div class="stat">
                <div class="stat-value">3</div>
                <div class="stat-label">Network Hops (New)</div>
            </div>
            <div class="stat">
                <div class="stat-value warning">600ms</div>
                <div class="stat-label">Latency (Old)</div>
            </div>
            <div class="stat">
                <div class="stat-value" style="color: var(--secondary)">300ms</div>
                <div class="stat-label">Latency (New)</div>
            </div>
            <div class="stat">
                <div class="stat-value primary">50%</div>
                <div class="stat-label">Faster Response</div>
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color noise"></div>
                <span>Noise Cancellation (LiveKit Cloud)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color turn"></div>
                <span>Turn Detection (Modal/Your Code)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color brain"></div>
                <span>Fast Brain LPU (Modal)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color transport"></div>
                <span>Audio Transport (LiveKit Cloud)</span>
            </div>
        </div>

        <!-- Architecture Comparison -->
        <section>
            <!-- Current HIVE215 Status Banner -->
            <div class="glass-card" style="margin-bottom: 30px; border: 2px solid var(--secondary); background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(99, 102, 241, 0.1));">
                <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                    <div style="font-size: 3rem;">ğŸ‰</div>
                    <div style="flex: 1; min-width: 200px;">
                        <h3 style="color: #4ade80; margin-bottom: 10px;">HIVE215 Production Milestone Achieved!</h3>
                        <p style="color: #94a3b8; margin: 0;">December 5, 2025 â€” LiveKit + Fast Brain pipeline live. This doc shows the <strong>next optimization</strong>: consolidating on LiveKit Cloud + Modal.</p>
                    </div>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <div style="background: rgba(16, 185, 129, 0.2); padding: 15px 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #4ade80;">~220ms</div>
                            <div style="font-size: 0.7rem; color: #94a3b8;">Current Latency</div>
                        </div>
                        <div style="background: rgba(99, 102, 241, 0.2); padding: 15px 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #818cf8;">6</div>
                            <div style="font-size: 0.7rem; color: #94a3b8;">Telephony Providers</div>
                        </div>
                        <div style="background: rgba(168, 85, 247, 0.2); padding: 15px 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #c4b5fd;">5</div>
                            <div style="font-size: 0.7rem; color: #94a3b8;">Built-in Skills</div>
                        </div>
                    </div>
                </div>
            </div>

            <h2 class="section-title">Architecture Comparison</h2>
            
            <!-- What's Live NOW -->
            <div class="glass-card" style="margin-bottom: 30px; border: 1px solid var(--secondary);">
                <div class="card-header">
                    <span class="card-title">ğŸŸ¢ What's Live NOW (December 2025)</span>
                    <span class="card-badge badge-live">PRODUCTION</span>
                </div>
                
                <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 20px; font-family: monospace; font-size: 0.8rem; line-height: 1.8; overflow-x: auto; margin-bottom: 20px;">
<pre style="color: #e2e8f0; margin: 0;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HIVE215 CURRENT VOICE PIPELINE (PRODUCTION)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚   User Speaks                                                                    â”‚
â”‚       â”‚                                                                          â”‚
â”‚       â–¼                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚   LiveKit   â”‚â”€â”€â”€â–¶â”‚   Deepgram Nova-2   â”‚â”€â”€â”€â–¶â”‚   Fast Brain    â”‚             â”‚
â”‚   â”‚   WebRTC    â”‚    â”‚   (STT ~100ms)      â”‚    â”‚   Groq LPU      â”‚             â”‚
â”‚   â”‚   <span style="color: #4ade80;">~20ms</span>     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   <span style="color: #4ade80;">(~150ms)</span>      â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                          â”‚                       â”‚
â”‚                                                          â–¼                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚   User      â”‚â—€â”€â”€â”€â”‚   Cartesia Sonic    â”‚â—€â”€â”€â”€â”‚   Skills DB     â”‚             â”‚
â”‚   â”‚   Hears     â”‚    â”‚   (TTS <span style="color: #4ade80;">~40ms</span>)       â”‚    â”‚   (context)     â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                                  â”‚
â”‚   Total Voice-to-Voice Latency: <span style="color: #4ade80;">~220ms</span> (Target: &lt;500ms) âœ…                      â”‚
â”‚                                                                                  â”‚
â”‚   <span style="color: #94a3b8;">Hosting: Railway (backend + worker) | Modal (Fast Brain) | LiveKit Cloud</span>      â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px;">
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: 700; color: #4ade80;">âœ…</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">LiveKit WebRTC</div>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: 700; color: #4ade80;">âœ…</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Deepgram Nova-2</div>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: 700; color: #4ade80;">âœ…</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Fast Brain/Groq</div>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: 700; color: #4ade80;">âœ…</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Cartesia Sonic</div>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: 700; color: #4ade80;">âœ…</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">6 Telephony Providers</div>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: 700; color: #4ade80;">âœ…</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Call Recording</div>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: 700; color: #4ade80;">âœ…</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Sentiment Analysis</div>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: 700; color: #4ade80;">âœ…</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Quality Scoring</div>
                    </div>
                </div>
            </div>

            <!-- Why Optimize? -->
            <div class="glass-card" style="margin-bottom: 30px; background: rgba(245, 158, 11, 0.05); border: 1px solid rgba(245, 158, 11, 0.3);">
                <h3 style="color: #fbbf24; margin-bottom: 15px;">ğŸ¯ Why Optimize Further?</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div>
                        <h4 style="color: #e2e8f0; margin-bottom: 10px;">Reduce Infrastructure</h4>
                        <p style="color: #94a3b8; font-size: 0.9rem; margin: 0;">Currently using Railway (backend + worker) + Modal (Fast Brain). Migration consolidates to just LiveKit Cloud + Modal.</p>
                    </div>
                    <div>
                        <h4 style="color: #e2e8f0; margin-bottom: 10px;">Free Standard Noise Cancellation</h4>
                        <p style="color: #94a3b8; font-size: 0.9rem; margin: 0;">LiveKit Cloud includes standard WebRTC echo cancellation + gain control on all plans. Enhanced (Krisp) is paid but usually not needed for telephony.</p>
                    </div>
                    <div>
                        <h4 style="color: #e2e8f0; margin-bottom: 10px;">Same-Datacenter Latency</h4>
                        <p style="color: #94a3b8; font-size: 0.9rem; margin: 0;">Worker + Fast Brain both on Modal = ~5ms internal calls instead of cross-cloud network hops.</p>
                    </div>
                    <div>
                        <h4 style="color: #e2e8f0; margin-bottom: 10px;">Cheaper Telephony</h4>
                        <p style="color: #94a3b8; font-size: 0.9rem; margin: 0;">Telnyx SIP at $0.004/min vs Twilio at $0.0085/min = 53% savings on call minutes.</p>
                    </div>
                </div>
            </div>

            <!-- Critical Architecture Notes -->
            <div class="glass-card" style="margin-bottom: 30px; border: 2px solid var(--primary); background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1));">
                <h3 style="color: #a5b4fc; margin-bottom: 20px;">âš¡ Why This Architecture is Professional-Grade</h3>
                
                <div style="display: grid; gap: 20px;">
                    <!-- Speed Wins -->
                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 12px;">
                        <h4 style="color: #4ade80; margin-bottom: 10px;">1. Speed Wins â€” Bottleneck is Speed of Light</h4>
                        <ul style="color: #94a3b8; margin: 0; padding-left: 20px; line-height: 1.8;">
                            <li><strong>Groq + Llama 3.3 70B:</strong> ~80ms TTFB on a 70B model is industry-leading</li>
                            <li><strong>Deepgram + Cartesia:</strong> Currently the fastest STT and TTS providers available</li>
                            <li><strong>Modal Internal Network:</strong> Worker â†’ Brain is ~5-10ms (same datacenter)</li>
                        </ul>
                    </div>

                    <!-- Cost Wins -->
                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 12px;">
                        <h4 style="color: #fbbf24; margin-bottom: 10px;">2. Cost Wins â€” BYO-Keys Avoids Middleman Markup</h4>
                        <ul style="color: #94a3b8; margin: 0; padding-left: 20px; line-height: 1.8;">
                            <li><strong>LiveKit Cloud:</strong> Only used for transport (moving media packets) â€” what they're best at</li>
                            <li><strong>Inference:</strong> Pay Deepgram/Cartesia/Groq directly, no LiveKit markup or credit limits</li>
                        </ul>
                    </div>

                    <!-- Skill Selector -->
                    <div style="background: rgba(239, 68, 68, 0.1); padding: 20px; border-radius: 12px; border: 1px solid rgba(239, 68, 68, 0.3);">
                        <h4 style="color: #fca5a5; margin-bottom: 10px;">3. Critical: Skill Selector Must Be Logic-Based (~0ms)</h4>
                        <p style="color: #94a3b8; margin-bottom: 15px;">
                            <strong style="color: #ef4444;">âš ï¸ DO NOT</strong> use an LLM to classify "is this legal or plumbing?" â€” that adds 200-500ms!
                        </p>
                        <p style="color: #94a3b8; margin-bottom: 15px;">
                            <strong style="color: #4ade80;">âœ… DO</strong> use <code>sip.trunkPhoneNumber</code> from LiveKit room metadata to select skill instantly.
                        </p>
                        <div class="code-block" style="margin: 0; font-size: 0.8rem;">
<pre><span class="comment"># Each customer has a dedicated Telnyx number</span>
SKILL_BY_NUMBER = {
    <span class="string">"+12155551234"</span>: <span class="string">"electrician"</span>,  <span class="comment"># Jenkintown Electricity</span>
    <span class="string">"+12155555678"</span>: <span class="string">"plumber"</span>,      <span class="comment"># Joe's Plumbing</span>
    <span class="string">"+12155559999"</span>: <span class="string">"lawyer"</span>,       <span class="comment"># Smith Law Office</span>
}

<span class="comment"># In entrypoint() â€” instant skill lookup</span>
trunk_number = ctx.room.metadata.get(<span class="string">"sip.trunkPhoneNumber"</span>)
skill = SKILL_BY_NUMBER.get(trunk_number, <span class="string">"receptionist"</span>)</pre>
                        </div>
                    </div>

                    <!-- Noise Cancellation -->
                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 12px;">
                        <h4 style="color: #60a5fa; margin-bottom: 10px;">4. Noise Cancellation: Standard vs Enhanced</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <div style="color: #4ade80; font-weight: 600; margin-bottom: 5px;">âœ… Standard (FREE)</div>
                                <p style="color: #94a3b8; font-size: 0.85rem; margin: 0;">WebRTC echo cancellation + gain control. Usually enough for standard phone calls.</p>
                            </div>
                            <div>
                                <div style="color: #fbbf24; font-weight: 600; margin-bottom: 5px;">ğŸ’° Enhanced (Paid)</div>
                                <p style="color: #94a3b8; font-size: 0.85rem; margin: 0;">Krisp/DeepFilter for dogs barking, traffic, etc. Probably not needed for telephony.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Modal Deployment -->
                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 12px;">
                        <h4 style="color: #c4b5fd; margin-bottom: 10px;">5. Modal Deployment: Two Separate Functions + Region Lock</h4>
                        <p style="color: #94a3b8; margin-bottom: 15px;">Deploy <code>livekit_worker.py</code> and <code>deploy_groq.py</code> as separate Modal apps <strong>in the same region</strong>:</p>
                        <div class="code-block" style="margin: 0; font-size: 0.8rem;">
<pre><span class="comment"># CRITICAL: Force same region as LiveKit Cloud</span>
app = modal.<span class="function">App</span>(<span class="string">"hive215-livekit-worker"</span>)

<span class="decorator">@app.function</span>(
    image=image,
    secrets=[...],
    <span class="keyword">region</span>=<span class="string">"us-east"</span>,  <span class="comment"># â† Match your LiveKit Cloud region!</span>
    keep_warm=1,
)
<span class="keyword">def</span> <span class="function">run_worker</span>():
    ...

<span class="comment"># Both apps must be in same region for ~5ms latency</span>
<span class="comment"># us-east = Virginia (LiveKit default)</span>
<span class="comment"># us-west = Oregon</span></pre>
                        </div>
                        <p style="color: #94a3b8; font-size: 0.85rem; margin-top: 15px;">
                            <strong>Why this matters:</strong> Without explicit region, Modal may deploy to different datacenters. 
                            Cross-region calls add 50-100ms latency, killing your speed advantage.
                        </p>
                        <p style="color: #94a3b8; font-size: 0.85rem; margin-top: 10px;">
                            <strong>Optional:</strong> If your knowledge base is large (PDFs for lawyer skill), mount a 
                            <a href="https://modal.com/docs/guide/network-file-systems" style="color: #818cf8;">Modal Network Volume</a> 
                            so both functions can access files without re-downloading every boot.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Production Skill Selector Module -->
            <div class="glass-card" style="margin-bottom: 30px; border: 1px solid #a855f7;">
                <div class="card-header">
                    <span class="card-title">ğŸ“¦ Production Skill Selector Module</span>
                    <span class="card-badge" style="background: rgba(168, 85, 247, 0.2); color: #c4b5fd;">skill_selector.py</span>
                </div>
                
                <p style="color: #94a3b8; margin-bottom: 20px;">
                    Full production implementation that pulls customer profiles from Supabase and builds optimized system prompts.
                    Download: <a href="computer:///mnt/user-data/outputs/skill_selector.py" style="color: #818cf8;">skill_selector.py</a>
                </p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #4ade80;">~0ms</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Cache lookup</div>
                    </div>
                    <div style="background: rgba(245, 158, 11, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #fbbf24;">~50ms</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">DB fallback</div>
                    </div>
                    <div style="background: rgba(99, 102, 241, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #818cf8;">5</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Built-in skills</div>
                    </div>
                    <div style="background: rgba(168, 85, 247, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #c4b5fd;">âˆ</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Custom skills</div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <h4 style="color: #e2e8f0; margin-bottom: 15px;">Key Features</h4>
                    <ul style="color: #94a3b8; margin: 0; padding-left: 20px; line-height: 2;">
                        <li><strong>Phone â†’ Profile Mapping:</strong> Uses <code>sip.trunkPhoneNumber</code> to look up customer instantly</li>
                        <li><strong>In-Memory Cache:</strong> Hot profiles cached for ~0ms lookup (refreshes every 5 min)</li>
                        <li><strong>Supabase Integration:</strong> Falls back to DB for cold lookups (~50ms)</li>
                        <li><strong>Built-in Skills:</strong> receptionist, electrician, plumber, lawyer, general</li>
                        <li><strong>Voice-Optimized Prompts:</strong> Auto-appends voice rules (contractions, short sentences, no markdown)</li>
                        <li><strong>Knowledge Base Support:</strong> Per-customer knowledge items injected into prompt</li>
                    </ul>
                </div>

                <div class="code-block" style="max-height: 400px; overflow-y: auto; font-size: 0.8rem;">
<pre><span class="comment"># skill_selector.py - Production skill selector for HIVE215</span>

<span class="decorator">@dataclass</span>
<span class="keyword">class</span> <span class="function">CustomerProfile</span>:
    customer_id: str
    business_name: str
    skill: str
    phone_number: str
    system_prompt: str
    greeting: str
    transfer_number: Optional[str] = <span class="keyword">None</span>
    knowledge_items: list[str] = <span class="keyword">None</span>

<span class="keyword">class</span> <span class="function">SkillSelector</span>:
    <span class="keyword">async def</span> <span class="function">get_profile_by_phone</span>(self, phone_number: str) -> CustomerProfile:
        <span class="string">"""Main entry point - ~0ms from cache, ~50ms from DB"""</span>
        phone = self._normalize_phone(phone_number)
        
        <span class="comment"># Check cache first</span>
        <span class="keyword">if</span> phone <span class="keyword">in</span> self._cache:
            <span class="keyword">return</span> self._cache[phone]
        
        <span class="comment"># Fetch from Supabase</span>
        profile = <span class="keyword">await</span> self._fetch_from_supabase(phone)
        <span class="keyword">if</span> profile:
            self._cache[phone] = profile
            <span class="keyword">return</span> profile
        
        <span class="comment"># Fallback to default receptionist</span>
        <span class="keyword">return</span> <span class="function">CustomerProfile</span>(skill=<span class="string">"receptionist"</span>, ...)

    <span class="keyword">def</span> <span class="function">build_system_prompt</span>(self, profile: CustomerProfile) -> str:
        <span class="string">"""Build complete prompt: base + business + knowledge + voice rules"""</span>
        prompt = profile.system_prompt <span class="keyword">or</span> BUILT_IN_SKILLS[profile.skill]
        prompt += f<span class="string">"\n\nBUSINESS: {profile.business_name}"</span>
        
        <span class="keyword">if</span> profile.knowledge_items:
            prompt += <span class="string">"\n\nKNOWLEDGE BASE:\n"</span> + <span class="string">"\n"</span>.join(f<span class="string">"- {k}"</span> <span class="keyword">for</span> k <span class="keyword">in</span> profile.knowledge_items)
        
        <span class="comment"># Critical: Voice optimization rules</span>
        prompt += <span class="string">"""

VOICE RESPONSE RULES:
- Keep responses under 2-3 sentences
- Use contractions (I'm, you're, we'll)
- No bullet points, lists, or markdown
- Spell out numbers (say "twenty-three" not "23")
- End with a question to keep conversation flowing"""</span>
        
        <span class="keyword">return</span> prompt</pre>
                </div>

                <div style="margin-top: 20px; background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 8px;">
                    <h4 style="color: #4ade80; margin-bottom: 10px;">Usage in livekit_worker.py:</h4>
                    <div class="code-block" style="margin: 0; font-size: 0.8rem;">
<pre><span class="keyword">from</span> skill_selector <span class="keyword">import</span> SkillSelector

selector = <span class="function">SkillSelector</span>()  <span class="comment"># Initialize once at module level</span>

<span class="keyword">async def</span> <span class="function">entrypoint</span>(ctx: JobContext):
    <span class="comment"># Get phone number from SIP metadata (~0ms)</span>
    trunk_number = ctx.room.metadata.get(<span class="string">"sip.trunkPhoneNumber"</span>)
    
    <span class="comment"># Look up customer (~0ms cache, ~50ms DB)</span>
    profile = <span class="keyword">await</span> selector.<span class="function">get_profile_by_phone</span>(trunk_number)
    
    <span class="comment"># Build optimized system prompt</span>
    system_prompt = selector.<span class="function">build_system_prompt</span>(profile)
    
    <span class="comment"># Create FastBrainLLM with customer context</span>
    llm = <span class="function">FastBrainLLM</span>(skill=profile.skill, system_prompt=system_prompt)
    
    <span class="comment"># Use custom greeting from profile</span>
    <span class="keyword">await</span> assistant.<span class="function">say</span>(profile.greeting, allow_interruptions=<span class="keyword">True</span>)</pre>
                    </div>
                </div>
            </div>

            <h3 style="color: #94a3b8; margin-bottom: 20px; font-size: 1rem; text-transform: uppercase; letter-spacing: 1px;">Before â†’ After Comparison</h3>
            
            <div class="comparison">
                <!-- Old Architecture -->
                <div class="glass-card architecture-card old">
                    <div class="card-header">
                        <span class="card-title">âŒ Original Setup (Before LiveKit)</span>
                        <span class="card-badge badge-old">Deprecated Nov 2025</span>
                    </div>

                    <div class="flow">
                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸ“ Phone Call Comes In</span>
                                <span class="step-location">Caller's Phone</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+0ms</span>
                                <span class="cost">$0</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸ”Œ Twilio/Telnyx Receives</span>
                                <span class="step-location">Twilio Servers</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+50ms</span>
                                <span class="cost">$0.0085/min</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸŒ Webhook to Railway</span>
                                <span class="step-location">Railway (Virginia)</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+80ms</span>
                                <span class="cost">$20/mo</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸ¤ Audio to Deepgram</span>
                                <span class="step-location">Deepgram API (Streaming)</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+100ms</span>
                                <span class="cost">$0.006/min</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step brain">
                            <div class="step-header">
                                <span class="step-name">ğŸ§  Fast Brain Processing</span>
                                <span class="step-location">Modal</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+80ms</span>
                                <span class="cost">~$0.001/min</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸ”Š Text to Cartesia</span>
                                <span class="step-location">Cartesia API</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+90ms</span>
                                <span class="cost">$0.015/1k chars</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">â†©ï¸ Audio Back to Railway</span>
                                <span class="step-location">Railway</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+80ms</span>
                                <span class="cost">â€”</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">â†©ï¸ Audio Back to Twilio</span>
                                <span class="step-location">Twilio</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+50ms</span>
                                <span class="cost">â€”</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸ“ Caller Hears Response</span>
                                <span class="step-location">Caller's Phone</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+70ms</span>
                                <span class="cost">â€”</span>
                            </div>
                        </div>
                    </div>

                    <div class="totals">
                        <div class="total-row">
                            <span>Total Latency</span>
                            <span class="latency">~600ms</span>
                        </div>
                        <div class="total-row">
                            <span>Network Hops</span>
                            <span>7 hops</span>
                        </div>
                        <div class="total-row">
                            <span>Services to Manage</span>
                            <span>5 services</span>
                        </div>
                        <div class="total-row final">
                            <span>Monthly Cost (20 customers)</span>
                            <span style="color: var(--danger)">~$280</span>
                        </div>
                    </div>
                </div>

                <!-- Arrow -->
                <div class="comparison-arrow">
                    <div class="arrow-circle">â†’</div>
                </div>

                <!-- New Architecture -->
                <div class="glass-card architecture-card new">
                    <div class="card-header">
                        <span class="card-title">âœ… Optimized Setup (LiveKit Cloud + Modal)</span>
                        <span class="card-badge badge-new">Migration Target</span>
                    </div>

                    <div class="flow">
                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸ“ Phone Call Comes In</span>
                                <span class="step-location">Caller's Phone</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+0ms</span>
                                <span class="cost">$0</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step highlight">
                            <div class="step-header">
                                <span class="step-name">ğŸ”Œ Telnyx SIP â†’ LiveKit Cloud</span>
                                <span class="step-location">LiveKit Edge (Nearest)</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+30ms</span>
                                <span class="cost">$0.004/min SIP</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step noise-cancel">
                            <div class="step-header">
                                <span class="step-name">ğŸ”‡ Standard Noise Cancellation</span>
                                <span class="step-location">LiveKit Cloud (WebRTC AEC)</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+10ms</span>
                                <span class="cost">FREE (Standard)</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step highlight">
                            <div class="step-header">
                                <span class="step-name">ğŸ¤ Clean Audio â†’ Your Modal Worker</span>
                                <span class="step-location">Modal (Your Code)</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+20ms</span>
                                <span class="cost">~$30/mo</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸ¤ Deepgram STT</span>
                                <span class="step-location">Streaming â€” Your API Key</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+60ms</span>
                                <span class="cost">$0.006/min</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step turn-detect">
                            <div class="step-header">
                                <span class="step-name">ğŸ¯ Turn Detection</span>
                                <span class="step-location">Modal (Your Code) â€” FREE</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+15ms</span>
                                <span class="cost">FREE âœ¨</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step brain">
                            <div class="step-header">
                                <span class="step-name">ğŸ§  Fast Brain LPU</span>
                                <span class="step-location">Modal (Same Process!)</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+50ms</span>
                                <span class="cost">~$0.001/min</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸ”Š Cartesia TTS</span>
                                <span class="step-location">Your API Key</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+40ms</span>
                                <span class="cost" style="color: #fbbf24;">~$0.0225/min âš ï¸</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step highlight">
                            <div class="step-header">
                                <span class="step-name">ğŸ”Š Audio â†’ LiveKit â†’ Caller</span>
                                <span class="step-location">LiveKit Edge</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+25ms</span>
                                <span class="cost">â€”</span>
                            </div>
                        </div>

                        <div class="flow-connector"></div>

                        <div class="flow-step">
                            <div class="step-header">
                                <span class="step-name">ğŸ“ Caller Hears Response</span>
                                <span class="step-location">Caller's Phone</span>
                            </div>
                            <div class="step-details">
                                <span class="latency">+50ms</span>
                                <span class="cost">â€”</span>
                            </div>
                        </div>
                    </div>

                    <div class="totals">
                        <div class="total-row">
                            <span>Total Latency</span>
                            <span style="color: var(--secondary)">~300ms</span>
                        </div>
                        <div class="total-row">
                            <span>Network Hops</span>
                            <span>3 hops</span>
                        </div>
                        <div class="total-row">
                            <span>Services to Manage</span>
                            <span>2 services</span>
                        </div>
                        <div class="total-row final">
                            <span>Monthly Cost (20 customers)</span>
                            <span>~$224</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Where Features Run -->
        <section style="margin-top: 60px;">
            <h2 class="section-title">Where Each Feature Runs</h2>
            
            <div class="pricing-grid">
                <div class="glass-card">
                    <h3>ğŸ”‡ Noise Cancellation</h3>
                    <div class="pricing-row">
                        <span class="label">Runs In</span>
                        <span class="value">LiveKit Cloud</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">When</span>
                        <span class="value">Before audio reaches you</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Cost</span>
                        <span class="value" style="color: var(--secondary)">FREE (all plans)</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Type</span>
                        <span class="value">BVCTelephony (phone optimized)</span>
                    </div>
                    <div class="code-block">
<pre><span class="comment"># Automatic â€” just enable it</span>
<span class="keyword">from</span> livekit.plugins <span class="keyword">import</span> noise_cancellation

session = AgentSession(
    <span class="function">noise_cancellation</span>=noise_cancellation.<span class="function">BVCTelephony</span>(),
    <span class="comment"># LiveKit applies this BEFORE</span>
    <span class="comment"># audio reaches your worker</span>
)</pre>
                    </div>
                </div>

                <div class="glass-card">
                    <h3>ğŸ¯ Turn Detection</h3>
                    <div class="pricing-row">
                        <span class="label">Runs In</span>
                        <span class="value">Your Modal Worker</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">When</span>
                        <span class="value">After STT, before LLM</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Cost</span>
                        <span class="value" style="color: var(--secondary)">FREE (runs locally)</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Requirements</span>
                        <span class="value">&lt;500MB RAM, CPU only</span>
                    </div>
                    <div class="code-block">
<pre><span class="comment"># Runs in YOUR code on Modal</span>
<span class="keyword">from</span> livekit.plugins.turn_detector.english <span class="keyword">import</span> EnglishModel

session = AgentSession(
    <span class="function">turn_detection</span>=<span class="function">EnglishModel</span>(),
    <span class="comment"># Downloads ~66MB model</span>
    <span class="comment"># Runs locally, ~15-45ms/turn</span>
)</pre>
                    </div>
                </div>

                <div class="glass-card">
                    <h3>ğŸ§  Fast Brain LPU</h3>
                    <div class="pricing-row">
                        <span class="label">Runs In</span>
                        <span class="value">Modal (Your Secret Sauce)</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">When</span>
                        <span class="value">After turn detection</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Cost</span>
                        <span class="value">~$0.001/min</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Skills</span>
                        <span class="value">Unlimited personas</span>
                    </div>
                    <div class="code-block">
<pre><span class="comment"># Your competitive moat</span>
<span class="keyword">from</span> brain_client <span class="keyword">import</span> FastBrainClient

brain = <span class="function">FastBrainClient</span>(
    base_url=<span class="string">"https://modal.run/..."</span>,
    skill=<span class="string">"electrician"</span>  <span class="comment"># or plumber, lawyer...</span>
)

response = <span class="keyword">await</span> brain.<span class="function">think</span>(user_text)</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Expert Brains: Fine-Tuning -->
        <section style="margin-top: 60px;">
            <h2 class="section-title">ğŸ§¬ Expert Brains: Fine-Tuned Models</h2>
            
            <div class="glass-card" style="margin-bottom: 30px; border: 2px solid var(--secondary); background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%);">
                <h3 style="color: #4ade80; margin-bottom: 20px;">Train on Modal â†’ Run on Groq (LoRA)</h3>
                
                <p style="color: #e2e8f0; margin-bottom: 20px;">
                    <strong>The next level:</strong> Instead of 500-token system prompts, fine-tune Llama 3.1 to 
                    <em>instinctively know</em> how to be an electrician receptionist. Smaller prompts = faster + cheaper.
                </p>

                <!-- Workflow Diagram -->
                <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px; margin-bottom: 20px; font-family: monospace; font-size: 0.85rem; overflow-x: auto;">
<pre style="margin: 0; color: #e2e8f0;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FINE-TUNING WORKFLOW                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   [Training Data]     [Modal GPU]        [LoRA Adapter]      [Groq LPU]     â”‚
â”‚        â”‚                  â”‚                   â”‚                   â”‚          â”‚
â”‚        â–¼                  â–¼                   â–¼                   â–¼          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚  1,000  â”‚  â”€â”€â”€â–º â”‚ torchtuneâ”‚  â”€â”€â”€â–º  â”‚  ~100MB â”‚  â”€â”€â”€â–º  â”‚   800    â”‚     â”‚
â”‚   â”‚ examplesâ”‚       â”‚ A100 GPU â”‚        â”‚ adapter â”‚        â”‚  tok/s   â”‚     â”‚
â”‚   â”‚ (JSONL) â”‚       â”‚  ($8)    â”‚        â”‚  file   â”‚        â”‚   âš¡      â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”‚   <span style="color: #94a3b8;">Preparation</span>         <span style="color: #fbbf24;">Training</span>            <span style="color: #4ade80;">Output</span>            <span style="color: #818cf8;">Inference</span>       â”‚
â”‚   <span style="color: #94a3b8;">~2 hours</span>           <span style="color: #fbbf24;">~4 hours</span>            <span style="color: #4ade80;">~100MB</span>            <span style="color: #818cf8;">instant</span>         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                </div>

                <!-- Comparison -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div style="background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);">
                        <h4 style="color: #fca5a5; margin-bottom: 10px;">âŒ Before: Heavy System Prompts</h4>
                        <div style="font-family: monospace; font-size: 0.8rem; color: #94a3b8;">
                            ELECTRICIAN_PROMPT = """<br>
                            You are a receptionist for an<br>
                            electrical company...<br>
                            [500+ tokens of instructions]<br>
                            [NEC code references]<br>
                            [Response examples]<br>
                            """
                        </div>
                        <p style="color: #ef4444; margin-top: 10px; font-size: 0.85rem;">
                            <strong>Cost:</strong> 500 tokens Ã— 10k calls = $7.50/day
                        </p>
                    </div>
                    
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(16, 185, 129, 0.3);">
                        <h4 style="color: #4ade80; margin-bottom: 10px;">âœ… After: Fine-Tuned Brain</h4>
                        <div style="font-family: monospace; font-size: 0.8rem; color: #94a3b8;">
                            ELECTRICIAN_PROMPT = """<br>
                            You are Sparky, the electrician<br>
                            receptionist.<br>
                            """<br>
                            <span style="color: #4ade80;"># Model instinctively knows</span><br>
                            <span style="color: #4ade80;"># how to handle calls</span>
                        </div>
                        <p style="color: #4ade80; margin-top: 10px; font-size: 0.85rem;">
                            <strong>Cost:</strong> 50 tokens Ã— 10k calls = $0.75/day
                        </p>
                    </div>
                </div>

                <!-- ROI -->
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px;">
                    <h4 style="color: #fbbf24; margin-bottom: 10px;">ğŸ’° ROI Calculator</h4>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; text-align: center;">
                        <div>
                            <div style="color: #94a3b8; font-size: 0.8rem;">Fine-Tuning Cost</div>
                            <div style="color: #e2e8f0; font-size: 1.5rem; font-weight: 700;">$8</div>
                            <div style="color: #94a3b8; font-size: 0.75rem;">one-time</div>
                        </div>
                        <div>
                            <div style="color: #94a3b8; font-size: 0.8rem;">Daily Savings</div>
                            <div style="color: #4ade80; font-size: 1.5rem; font-weight: 700;">$6.75</div>
                            <div style="color: #94a3b8; font-size: 0.75rem;">@ 10k calls/day</div>
                        </div>
                        <div>
                            <div style="color: #94a3b8; font-size: 0.8rem;">Payback Period</div>
                            <div style="color: #818cf8; font-size: 1.5rem; font-weight: 700;">1.2 days</div>
                            <div style="color: #94a3b8; font-size: 0.75rem;">then pure profit</div>
                        </div>
                    </div>
                </div>

                <!-- Groq LoRA Note -->
                <div style="margin-top: 20px; padding: 15px; background: rgba(245, 158, 11, 0.1); border-radius: 8px; border: 1px solid rgba(245, 158, 11, 0.3);">
                    <h4 style="color: #fbbf24; margin-bottom: 8px;">âš ï¸ Groq LoRA Status</h4>
                    <p style="color: #94a3b8; font-size: 0.9rem; margin: 0;">
                        Groq LoRA inference is <strong>rolling out to Enterprise users</strong>. If you don't have access yet, 
                        run inference on Modal (slower) until Groq enables LoRA for your account. Check 
                        <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">GET /v1/models</code> 
                        for LoRA support.
                    </p>
                </div>

                <!-- CTA -->
                <div style="margin-top: 20px; text-align: center;">
                    <p style="color: #e2e8f0; margin-bottom: 10px;">
                        Full guide: <code style="background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px;">EXPERT_BRAIN_FINETUNING.md</code>
                    </p>
                    <p style="color: #94a3b8; font-size: 0.85rem;">
                        Start with your Jenkintown Electricity call recordings â†’ transcribe â†’ fine-tune â†’ deploy
                    </p>
                </div>
            </div>
        </section>

        <!-- Brain + Mouth: Dynamic Voice -->
        <section style="margin-top: 60px;">
            <h2 class="section-title">ğŸ§ ğŸ‘„ Brain + Mouth: Dynamic Voice</h2>
            
            <div class="glass-card" style="margin-bottom: 30px; border: 2px solid #ec4899; background: linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);">
                <h3 style="color: #f472b6; margin-bottom: 20px;">GOD MODE: LLM Controls Voice Emotion</h3>
                
                <p style="color: #e2e8f0; margin-bottom: 20px;">
                    <strong>The ultimate level:</strong> Train Llama to output both WHAT to say AND HOW to say it. 
                    Parler-TTS generates audio matching the description. <em>Dynamic emotional voice that adapts to context.</em>
                </p>

                <!-- Architecture Diagram -->
                <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px; margin-bottom: 20px; font-family: monospace; font-size: 0.8rem; overflow-x: auto;">
<pre style="margin: 0; color: #e2e8f0;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BRAIN + MOUTH ARCHITECTURE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   User: <span style="color: #fbbf24;">"My power is out!"</span>                                                  â”‚
â”‚            â”‚                                                                  â”‚
â”‚            â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚   â”‚  <span style="color: #818cf8;">ğŸ§  BRAIN</span>        â”‚  Llama decides: This is <span style="color: #ef4444;">URGENT</span>                          â”‚
â”‚   â”‚  (Fine-tuned)   â”‚                                                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                         â”‚
â”‚            â”‚                                                                  â”‚
â”‚            â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚ {                                                            â”‚            â”‚
â”‚   â”‚   <span style="color: #4ade80;">"voice"</span>: "A calm, reassuring female voice speaking       â”‚            â”‚
â”‚   â”‚            at a measured pace with warmth and empathy.",    â”‚            â”‚
â”‚   â”‚   <span style="color: #60a5fa;">"text"</span>: "I understand, that's stressful. Let me get       â”‚            â”‚
â”‚   â”‚           your info and we'll dispatch someone right away." â”‚            â”‚
â”‚   â”‚ }                                                            â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚            â”‚                                                                  â”‚
â”‚            â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚   â”‚  <span style="color: #f472b6;">ğŸ‘„ MOUTH</span>       â”‚  Parler-TTS generates audio matching                   â”‚
â”‚   â”‚  (Parler-TTS)   â”‚  the description                                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                         â”‚
â”‚            â”‚                                                                  â”‚
â”‚            â–¼                                                                  â”‚
â”‚   ğŸ”Š User hears: <span style="color: #4ade80;">Calm, empathetic voice</span>                                      â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                </div>

                <!-- Comparison: Traditional vs Dynamic -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div style="background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);">
                        <h4 style="color: #fca5a5; margin-bottom: 10px;">âŒ Traditional TTS</h4>
                        <ul style="color: #94a3b8; font-size: 0.85rem; margin: 0; padding-left: 20px;">
                            <li>Pick ONE voice at setup</li>
                            <li>Same tone for everything</li>
                            <li>"Your house is on fire" ğŸ˜</li>
                            <li>"Have a nice day" ğŸ˜</li>
                            <li>Robotic, emotionless</li>
                        </ul>
                    </div>
                    
                    <div style="background: rgba(236, 72, 153, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(236, 72, 153, 0.3);">
                        <h4 style="color: #f472b6; margin-bottom: 10px;">âœ… Brain + Mouth</h4>
                        <ul style="color: #94a3b8; font-size: 0.85rem; margin: 0; padding-left: 20px;">
                            <li>Voice adapts to <strong>context</strong></li>
                            <li>Emergency â†’ Calm, reassuring</li>
                            <li>Good news â†’ Cheerful, bright</li>
                            <li>Frustrated caller â†’ Soft, apologetic</li>
                            <li><span style="color: #f472b6;">Sounds HUMAN</span></li>
                        </ul>
                    </div>
                </div>

                <!-- Voice Examples -->
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #a78bfa; margin-bottom: 15px;">Voice Description Examples</h4>
                    <div style="display: grid; gap: 10px; font-size: 0.85rem;">
                        <div style="display: grid; grid-template-columns: 120px 1fr; gap: 10px; align-items: center;">
                            <span style="color: #ef4444;">Emergency:</span>
                            <span style="color: #94a3b8;">"A calm but urgent voice. Reassuring yet conveying importance."</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 120px 1fr; gap: 10px; align-items: center;">
                            <span style="color: #fbbf24;">Frustrated:</span>
                            <span style="color: #94a3b8;">"A soft, apologetic voice with genuine empathy. Slower pace."</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 120px 1fr; gap: 10px; align-items: center;">
                            <span style="color: #4ade80;">Good news:</span>
                            <span style="color: #94a3b8;">"A bright, cheerful voice with enthusiasm and warmth."</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 120px 1fr; gap: 10px; align-items: center;">
                            <span style="color: #60a5fa;">Explaining:</span>
                            <span style="color: #94a3b8;">"A patient, clear voice. Teacher-like, emphasizing key words."</span>
                        </div>
                    </div>
                </div>

                <!-- Cost Comparison -->
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px;">
                    <h4 style="color: #fbbf24; margin-bottom: 10px;">ğŸ’° Cost: Parler vs Cartesia</h4>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; text-align: center;">
                        <div>
                            <div style="color: #94a3b8; font-size: 0.8rem;">Cartesia (Real-time)</div>
                            <div style="color: #ef4444; font-size: 1.3rem; font-weight: 700;">$22.50</div>
                            <div style="color: #94a3b8; font-size: 0.75rem;">per 1k mins</div>
                        </div>
                        <div>
                            <div style="color: #94a3b8; font-size: 0.8rem;">Parler-TTS (Modal)</div>
                            <div style="color: #4ade80; font-size: 1.3rem; font-weight: 700;">~$0.17</div>
                            <div style="color: #94a3b8; font-size: 0.75rem;">per 1k mins</div>
                        </div>
                        <div>
                            <div style="color: #94a3b8; font-size: 0.8rem;">Savings</div>
                            <div style="color: #f472b6; font-size: 1.3rem; font-weight: 700;">99%</div>
                            <div style="color: #94a3b8; font-size: 0.75rem;">cheaper</div>
                        </div>
                    </div>
                    <p style="color: #94a3b8; font-size: 0.8rem; margin-top: 10px; text-align: center;">
                        <strong>Trade-off:</strong> Parler is slower (~500ms vs 40ms). Best for voicemail, greetings, async content.
                    </p>
                </div>

                <!-- CTA -->
                <div style="margin-top: 20px; text-align: center;">
                    <p style="color: #e2e8f0; margin-bottom: 10px;">
                        Full guide: <code style="background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px;">BRAIN_MOUTH_VOICE_SYSTEM.md</code>
                    </p>
                    <p style="color: #94a3b8; font-size: 0.85rem;">
                        Parler-TTS deployment: <code style="background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px;">parler_tts/deploy.py</code>
                    </p>
                </div>
            </div>
        </section>

        <!-- System 1 + System 2: Hybrid Intelligence -->
        <section style="margin-top: 60px;">
            <h2 class="section-title">ğŸš€ğŸ§  System 1 + System 2: Hybrid Intelligence</h2>
            
            <div class="glass-card" style="margin-bottom: 30px; border: 2px solid #f59e0b; background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(239, 68, 68, 0.1) 100%);">
                <h3 style="color: #fbbf24; margin-bottom: 10px;">The "Holy Grail" Architecture</h3>
                <p style="color: #94a3b8; margin-bottom: 20px; font-style: italic;">
                    Named after "Thinking, Fast and Slow" by Daniel Kahneman
                </p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(16, 185, 129, 0.3);">
                        <h4 style="color: #4ade80; margin-bottom: 10px;">ğŸš€ System 1: Fast Brain</h4>
                        <div style="font-size: 0.9rem; color: #e2e8f0; margin-bottom: 10px;">
                            <strong>Groq + Llama 3.3 70B</strong>
                        </div>
                        <ul style="color: #94a3b8; font-size: 0.85rem; margin: 0; padding-left: 20px;">
                            <li>Intuitive, instant responses</li>
                            <li>~80ms latency</li>
                            <li>Handles 90% of calls</li>
                            <li>Greetings, info collection, scheduling</li>
                        </ul>
                    </div>
                    
                    <div style="background: rgba(168, 85, 247, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(168, 85, 247, 0.3);">
                        <h4 style="color: #a78bfa; margin-bottom: 10px;">ğŸ§  System 2: Deep Brain</h4>
                        <div style="font-size: 0.9rem; color: #e2e8f0; margin-bottom: 10px;">
                            <strong>Claude 3.5 Sonnet</strong>
                        </div>
                        <ul style="color: #94a3b8; font-size: 0.85rem; margin: 0; padding-left: 20px;">
                            <li>Rational, complex reasoning</li>
                            <li>~2000ms latency</li>
                            <li>Handles 10% of calls</li>
                            <li>Analysis, calculations, advice</li>
                        </ul>
                    </div>
                </div>

                <!-- Architecture Diagram -->
                <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px; margin-bottom: 20px; font-family: monospace; font-size: 0.75rem; overflow-x: auto;">
<pre style="margin: 0; color: #e2e8f0;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SYSTEM 1 + SYSTEM 2 HYBRID WORKFLOW                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚   User: <span style="color: #fbbf24;">"Can you analyze my bill and predict next month's cost?"</span>              â”‚
â”‚            â”‚                                                                     â”‚
â”‚            â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                            â”‚
â”‚   â”‚  <span style="color: #4ade80;">ğŸš€ SYSTEM 1</span>    â”‚  Groq analyzes intent in <span style="color: #4ade80;">~80ms</span>                           â”‚
â”‚   â”‚  (Fast Brain)   â”‚  Decision: "I need Claude for this..."                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                            â”‚
â”‚            â”‚                                                                     â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                                                              â”‚
â”‚     â”‚             â”‚                                                              â”‚
â”‚     â–¼             â–¼                                                              â”‚
â”‚  <span style="color: #4ade80;">[SIMPLE]</span>      <span style="color: #a78bfa;">[COMPLEX]</span>                                                         â”‚
â”‚     â”‚             â”‚                                                              â”‚
â”‚     â–¼             â”œâ”€â”€â”€â”€â”€â–º <span style="color: #fbbf24;">Output A (To User):</span>                                   â”‚
â”‚  Answer           â”‚       "Let me pull up your info and calculate that..."      â”‚
â”‚  Directly         â”‚       <span style="color: #94a3b8;">(FILLER PHRASE - buys 2.5 seconds)</span>                    â”‚
â”‚  <span style="color: #4ade80;">(~80ms)</span>          â”‚                                                              â”‚
â”‚                   â”œâ”€â”€â”€â”€â”€â–º <span style="color: #a78bfa;">Output B (To System):</span>                                  â”‚
â”‚                   â”‚       invoke_expert_model(query)                             â”‚
â”‚                   â”‚                                                              â”‚
â”‚                   â–¼                                                              â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚          â”‚  <span style="color: #a78bfa;">ğŸ§  SYSTEM 2</span>    â”‚  Claude thinks for <span style="color: #a78bfa;">~2 seconds</span>                     â”‚
â”‚          â”‚  (Deep Brain)   â”‚  <span style="color: #94a3b8;">(hidden behind filler audio)</span>                      â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚                   â”‚                                                              â”‚
â”‚                   â–¼                                                              â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚          â”‚  <span style="color: #f472b6;">THE MAGIC MOMENT:</span>                             â”‚                         â”‚
â”‚          â”‚  Filler audio ends â†’ Claude's answer arrives â”‚                         â”‚
â”‚          â”‚  Voice continues: "Based on your usage..."   â”‚                         â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                                  â”‚
â”‚   <span style="color: #4ade80;">User Perception: ZERO LATENCY. Agent feels human.</span>                            â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                </div>

                <!-- The Filler Strategy -->
                <div style="background: rgba(245, 158, 11, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(245, 158, 11, 0.3); margin-bottom: 20px;">
                    <h4 style="color: #fbbf24; margin-bottom: 10px;">ğŸ­ The "Filler Phrase" Strategy</h4>
                    <p style="color: #94a3b8; font-size: 0.9rem; margin-bottom: 15px;">
                        The trick that hides Claude's 2-second latency during live calls:
                    </p>
                    <div style="display: grid; gap: 10px; font-size: 0.85rem;">
                        <div style="display: flex; gap: 10px; align-items: flex-start;">
                            <span style="color: #4ade80; font-weight: bold; min-width: 20px;">1.</span>
                            <span style="color: #e2e8f0;">Groq detects complex question â†’ fires TWO outputs simultaneously</span>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: flex-start;">
                            <span style="color: #4ade80; font-weight: bold; min-width: 20px;">2.</span>
                            <span style="color: #e2e8f0;">Output A â†’ TTS speaks: <em>"Let me pull that up for you..."</em> (~2.5s audio)</span>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: flex-start;">
                            <span style="color: #4ade80; font-weight: bold; min-width: 20px;">3.</span>
                            <span style="color: #e2e8f0;">Output B â†’ Silently calls Claude in background</span>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: flex-start;">
                            <span style="color: #4ade80; font-weight: bold; min-width: 20px;">4.</span>
                            <span style="color: #e2e8f0;">Claude finishes (~2s) just as filler audio ends</span>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: flex-start;">
                            <span style="color: #4ade80; font-weight: bold; min-width: 20px;">5.</span>
                            <span style="color: #e2e8f0;">Voice seamlessly continues: <em>"Based on your usage of 850 kWh..."</em></span>
                        </div>
                    </div>
                </div>

                <!-- Filler Phrases Examples -->
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #60a5fa; margin-bottom: 10px;">Example Filler Phrases</h4>
                    <div style="display: grid; grid-template-columns: 100px 1fr; gap: 10px; font-size: 0.85rem;">
                        <span style="color: #fbbf24;">Analysis:</span>
                        <span style="color: #94a3b8;">"Let me pull up your information and analyze that for you..."</span>
                        <span style="color: #fbbf24;">Calculation:</span>
                        <span style="color: #94a3b8;">"Let me run those numbers for you real quick..."</span>
                        <span style="color: #fbbf24;">Research:</span>
                        <span style="color: #94a3b8;">"That's a detailed question. Let me look into that..."</span>
                        <span style="color: #fbbf24;">Complex:</span>
                        <span style="color: #94a3b8;">"Hmm, let me think through that carefully..."</span>
                    </div>
                </div>

                <!-- Implementation -->
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #4ade80; margin-bottom: 10px;">Implementation: Tool Use Pattern</h4>
                    <div style="font-family: monospace; font-size: 0.8rem; color: #e2e8f0; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto;">
<pre style="margin: 0;"><span style="color: #94a3b8;"># Groq System Prompt</span>
<span style="color: #e2e8f0;">"""
You are a helpful receptionist. Answer casual questions directly.
IF the user asks for complex analysis, calculations, or advice,
DO NOT answer. Instead, call the 'ask_expert' tool immediately.
"""</span>

<span style="color: #94a3b8;"># The Magic</span>
<span style="color: #c084fc;">if</span> response.tool_calls[<span style="color: #f59e0b;">0</span>].name == <span style="color: #a5f3fc;">"ask_expert"</span>:
    <span style="color: #94a3b8;"># A. Play filler immediately</span>
    play_audio(<span style="color: #a5f3fc;">"Let me check on that..."</span>)
    
    <span style="color: #94a3b8;"># B. Call Claude (runs during filler audio)</span>
    answer = claude.messages.create(...)
    
    <span style="color: #94a3b8;"># C. Speak real answer (seamless transition)</span>
    text_to_speech(answer)</pre>
                    </div>
                </div>

                <!-- API Endpoints -->
                <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(16, 185, 129, 0.3);">
                    <h4 style="color: #4ade80; margin-bottom: 10px;">Fast Brain v3.0 Endpoints</h4>
                    <div style="display: grid; gap: 8px; font-size: 0.85rem; font-family: monospace;">
                        <div style="display: grid; grid-template-columns: 220px 1fr; gap: 10px;">
                            <span style="color: #60a5fa;">POST /v1/chat/completions</span>
                            <span style="color: #94a3b8;">System 1 only (backwards compatible)</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 220px 1fr; gap: 10px;">
                            <span style="color: #4ade80;">POST /v1/chat/hybrid</span>
                            <span style="color: #94a3b8;">System 1 + System 2 (recommended)</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 220px 1fr; gap: 10px;">
                            <span style="color: #f472b6;">POST /v1/chat/voice</span>
                            <span style="color: #94a3b8;">Hybrid + voice descriptions</span>
                        </div>
                    </div>
                </div>

                <!-- Required Secrets -->
                <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                    <h4 style="color: #94a3b8; margin-bottom: 10px;">Required Modal Secrets</h4>
                    <div style="font-family: monospace; font-size: 0.8rem; color: #e2e8f0;">
                        modal secret create groq-api-key GROQ_API_KEY=gsk_...<br>
                        modal secret create anthropic-api-key ANTHROPIC_API_KEY=sk-ant-...
                    </div>
                </div>
            </div>
        </section>

        <!-- HIVE215 Subscription Tiers -->
        <section style="margin-top: 60px;">
            <h2 class="section-title">HIVE215 Subscription Tiers</h2>
            
            <div class="pricing-grid" style="margin-bottom: 40px;">
                <div class="glass-card" style="border-top: 3px solid #64748b;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="font-size: 2rem;">ğŸ†“</span>
                        <h3 style="margin: 10px 0;">Free</h3>
                        <div style="font-size: 2rem; font-weight: 700; color: #94a3b8;">$0<span style="font-size: 1rem; font-weight: 400;">/mo</span></div>
                    </div>
                    <div class="pricing-row"><span class="label">Minutes</span><span class="value">30/month</span></div>
                    <div class="pricing-row"><span class="label">Profile Fields</span><span class="value">1 (60 chars)</span></div>
                    <div class="pricing-row"><span class="label">Platforms</span><span class="value">Web only</span></div>
                    <div class="pricing-row"><span class="label">Call Logs</span><span class="value">Basic</span></div>
                </div>

                <div class="glass-card" style="border-top: 3px solid var(--primary);">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="font-size: 2rem;">âš¡</span>
                        <h3 style="margin: 10px 0;">Starter</h3>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--primary);">$9.99<span style="font-size: 1rem; font-weight: 400;">/mo</span></div>
                    </div>
                    <div class="pricing-row"><span class="label">Minutes</span><span class="value">200/month</span></div>
                    <div class="pricing-row"><span class="label">Profile Fields</span><span class="value">2 (60 chars each)</span></div>
                    <div class="pricing-row"><span class="label">Platforms</span><span class="value">iOS, Android, Web</span></div>
                    <div class="pricing-row"><span class="label">Call Sharing</span><span class="value">âœ… Email/Text</span></div>
                </div>

                <div class="glass-card" style="border-top: 3px solid var(--secondary); transform: scale(1.02);">
                    <div style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--secondary); color: #000; padding: 4px 12px; border-radius: 20px; font-size: 0.7rem; font-weight: 700;">POPULAR</div>
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="font-size: 2rem;">ğŸš€</span>
                        <h3 style="margin: 10px 0;">Pro</h3>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--secondary);">$29.99<span style="font-size: 1rem; font-weight: 400;">/mo</span></div>
                    </div>
                    <div class="pricing-row"><span class="label">Minutes</span><span class="value">1,000/month</span></div>
                    <div class="pricing-row"><span class="label">Profile Fields</span><span class="value">5 (120 chars each)</span></div>
                    <div class="pricing-row"><span class="label">Team Members</span><span class="value">3</span></div>
                    <div class="pricing-row"><span class="label">Webhooks</span><span class="value">âœ… Enabled</span></div>
                    <div class="pricing-row"><span class="label">Custom Greeting</span><span class="value">âœ…</span></div>
                </div>

                <div class="glass-card" style="border-top: 3px solid var(--accent);">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="font-size: 2rem;">ğŸ¢</span>
                        <h3 style="margin: 10px 0;">Business</h3>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--accent);">$79.99<span style="font-size: 1rem; font-weight: 400;">/mo</span></div>
                    </div>
                    <div class="pricing-row"><span class="label">Minutes</span><span class="value">5,000/month</span></div>
                    <div class="pricing-row"><span class="label">Profile Fields</span><span class="value">10 (unlimited chars)</span></div>
                    <div class="pricing-row"><span class="label">Team Members</span><span class="value">10</span></div>
                    <div class="pricing-row"><span class="label">CRM Integrations</span><span class="value">âœ…</span></div>
                    <div class="pricing-row"><span class="label">Advanced Analytics</span><span class="value">âœ…</span></div>
                </div>
            </div>

            <div class="glass-card" style="text-align: center; padding: 30px; background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(99, 102, 241, 0.1));">
                <span style="font-size: 2rem;">ğŸ›ï¸</span>
                <h3 style="margin: 15px 0;">Enterprise</h3>
                <p style="color: #94a3b8; margin-bottom: 15px;">Unlimited minutes, unlimited team members, white-label option, custom integrations, SLA guarantee</p>
                <span style="color: #c4b5fd; font-weight: 600;">Custom Pricing â€” Contact sales@hive215.com</span>
            </div>
        </section>

        <!-- Pricing Breakdown -->
        <section class="pricing-section">
            <h2 class="section-title">Cost Breakdown (20 Customers)</h2>
            
            <div class="pricing-grid">
                <div class="glass-card pricing-card">
                    <h3>ğŸ“¦ Current Stack (Railway)</h3>
                    <div class="pricing-row">
                        <span class="label">Twilio (phone)</span>
                        <span class="value">$50/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Railway (worker)</span>
                        <span class="value">$20/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Modal (brain)</span>
                        <span class="value">$30/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Deepgram</span>
                        <span class="value">$50/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Cartesia</span>
                        <span class="value">$30/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Vercel</span>
                        <span class="value">$20/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Telnyx Numbers (20)</span>
                        <span class="value">$20/mo</span>
                    </div>
                    <div class="pricing-row total">
                        <span class="label">Total</span>
                        <span class="value" style="color: var(--danger)">~$280/mo</span>
                    </div>
                </div>

                <div class="glass-card pricing-card">
                    <h3>ğŸ¯ Optimized Stack (Modal)</h3>
                    <div class="pricing-row">
                        <span class="label">LiveKit Cloud (Ship)</span>
                        <span class="value">$50/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Telnyx SIP (~1k min)</span>
                        <span class="value">$8.50/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Modal (brain + worker)</span>
                        <span class="value">$30/mo</span>
                    </div>
                    <div class="pricing-row" style="color: #fbbf24;">
                        <span class="label">Deepgram Streaming âš ï¸</span>
                        <span class="value">$6/mo</span>
                    </div>
                    <div class="pricing-row" style="color: #ef4444;">
                        <span class="label">Cartesia TTS âš ï¸</span>
                        <span class="value">$22.50/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Groq (Llama 3.3 70B)</span>
                        <span class="value" style="color: var(--secondary)">FREE</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Vercel</span>
                        <span class="value">$20/mo</span>
                    </div>
                    <div class="pricing-row total">
                        <span class="label">Total (1k mins)</span>
                        <span class="value">~$137/mo</span>
                    </div>
                    <div class="pricing-row savings">
                        <span class="label">Still Profitable</span>
                        <span class="value" style="color: var(--secondary)">93% margin</span>
                    </div>
                </div>

                <div class="glass-card pricing-card">
                    <h3>ğŸ’° Revenue (20 Customers)</h3>
                    <div class="pricing-row">
                        <span class="label">20 Ã— $99/mo</span>
                        <span class="value">$1,980/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Optimized Stack Cost</span>
                        <span class="value">-$137/mo</span>
                    </div>
                    <div class="pricing-row total">
                        <span class="label">Net Profit</span>
                        <span class="value">$1,843/mo</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Profit Margin</span>
                        <span class="value" style="color: var(--secondary)">93.1%</span>
                    </div>
                </div>
            </div>

            <!-- Critical Cost Warnings -->
            <div class="glass-card" style="margin-top: 30px; border: 2px solid var(--danger); background: rgba(239, 68, 68, 0.1);">
                <h3 style="color: #fca5a5; margin-bottom: 20px;">ğŸ”´ Critical Cost Corrections</h3>
                
                <div style="display: grid; gap: 20px;">
                    <!-- Cartesia Warning -->
                    <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px;">
                        <h4 style="color: #ef4444; margin-bottom: 10px;">1. Cartesia is 10x More Than Initially Estimated</h4>
                        <p style="color: #94a3b8; margin-bottom: 15px;">
                            Initial estimate was ~$0.002/min. <strong>Actual cost: ~$0.0225/min</strong>
                        </p>
                        <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; font-family: monospace; font-size: 0.85rem; color: #e2e8f0;">
                            Cartesia Sonic: $0.030 per 1,000 characters<br>
                            Average speech: 150 words/min Ã— 5 chars/word = 750 chars/min<br>
                            <strong style="color: #ef4444;">Real Cost: $0.030 Ã— (750/1000) = $0.0225/min</strong>
                        </div>
                        <p style="color: #94a3b8; margin-top: 15px; font-size: 0.9rem;">
                            <strong>Impact:</strong> 1,000 minutes = <span style="color: #ef4444;">$22.50</span>, not $2.00
                        </p>
                    </div>

                    <!-- Deepgram Warning -->
                    <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px;">
                        <h4 style="color: #fbbf24; margin-bottom: 10px;">2. Deepgram Streaming vs Batch Pricing</h4>
                        <p style="color: #94a3b8; margin-bottom: 15px;">
                            Nova-2 <strong>Batch</strong> is $0.0043/min. <strong>Streaming</strong> (what you need) is ~$0.006/min.
                        </p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div style="background: rgba(100, 116, 139, 0.2); padding: 12px; border-radius: 8px;">
                                <div style="color: #94a3b8; font-size: 0.8rem;">Batch (Pre-recorded)</div>
                                <div style="color: #e2e8f0; font-weight: 600;">$0.0043/min</div>
                            </div>
                            <div style="background: rgba(245, 158, 11, 0.2); padding: 12px; border-radius: 8px;">
                                <div style="color: #fbbf24; font-size: 0.8rem;">Streaming (Real-time) âš ï¸</div>
                                <div style="color: #e2e8f0; font-weight: 600;">$0.006/min</div>
                            </div>
                        </div>
                        <p style="color: #94a3b8; margin-top: 15px; font-size: 0.9rem;">
                            <strong>Impact:</strong> STT costs 40% higher than initial estimate
                        </p>
                    </div>

                    <!-- LiveKit SIP Warning -->
                    <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px;">
                        <h4 style="color: #60a5fa; margin-bottom: 10px;">3. LiveKit Free Tier SIP Cap</h4>
                        <p style="color: #94a3b8; margin-bottom: 10px;">
                            Free tier includes <strong>1,000 minutes</strong> of third-party SIP ingress. That's only ~16 hours of total talk time across ALL users.
                        </p>
                        <p style="color: #94a3b8; font-size: 0.9rem;">
                            <strong>Action:</strong> After 1,000 mins, LiveKit requires credit card. The $50/mo Ship plan is safer for business.
                        </p>
                    </div>
                </div>

                <!-- TTS Alternatives -->
                <div style="margin-top: 20px; padding: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 12px; border: 1px solid rgba(16, 185, 129, 0.3);">
                    <h4 style="color: #4ade80; margin-bottom: 15px;">ğŸ’¡ TTS Alternatives (If Cartesia is Too Expensive)</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;">
                            <div style="color: #e2e8f0; font-weight: 600;">Cartesia Sonic</div>
                            <div style="color: #ef4444; font-size: 0.9rem;">~$0.0225/min</div>
                            <div style="color: #4ade80; font-size: 0.8rem;">âš¡ Fastest (40ms TTFB)</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;">
                            <div style="color: #e2e8f0; font-weight: 600;">Deepgram Aura</div>
                            <div style="color: #fbbf24; font-size: 0.9rem;">~$0.015/min</div>
                            <div style="color: #94a3b8; font-size: 0.8rem;">Good quality, cheaper</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;">
                            <div style="color: #e2e8f0; font-weight: 600;">OpenAI TTS</div>
                            <div style="color: #fbbf24; font-size: 0.9rem;">~$0.015/min</div>
                            <div style="color: #94a3b8; font-size: 0.8rem;">Reliable, slower</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;">
                            <div style="color: #e2e8f0; font-weight: 600;">ElevenLabs</div>
                            <div style="color: #ef4444; font-size: 0.9rem;">~$0.03/min</div>
                            <div style="color: #94a3b8; font-size: 0.8rem;">Best quality, expensive</div>
                        </div>
                    </div>
                    <p style="color: #94a3b8; margin-top: 15px; font-size: 0.85rem;">
                        <strong>Recommendation:</strong> Stick with Cartesia for speed. TTS is your biggest cost, but the 40ms TTFB is worth it for voice UX.
                    </p>
                </div>
            </div>
        </section>

        <!-- Fast Brain Deep Dive -->
        <section style="margin-top: 60px;">
            <h2 class="section-title">ğŸ§  Fast Brain LPU â€” Your Competitive Moat</h2>
            
            <div class="stats-bar" style="margin-bottom: 30px;">
                <div class="stat">
                    <div class="stat-value" style="color: var(--secondary)">80ms</div>
                    <div class="stat-label">TTFB (Time to First Byte)</div>
                </div>
                <div class="stat">
                    <div class="stat-value" style="color: var(--primary)">200+</div>
                    <div class="stat-label">Tokens/Second</div>
                </div>
                <div class="stat">
                    <div class="stat-value" style="color: var(--accent)">5</div>
                    <div class="stat-label">Built-in Skills</div>
                </div>
                <div class="stat">
                    <div class="stat-value" style="color: #a855f7">$0</div>
                    <div class="stat-label">Groq Free Tier</div>
                </div>
            </div>

            <!-- Current Fast Brain Status -->
            <div class="glass-card" style="margin-bottom: 30px; border: 1px solid var(--secondary);">
                <div class="card-header">
                    <span class="card-title">âœ… Current Fast Brain Status</span>
                    <span class="card-badge badge-live">LIVE ON MODAL</span>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px;">
                        <h4 style="color: #4ade80; margin-bottom: 10px;">ğŸŸ¢ What's Working</h4>
                        <ul style="color: #94a3b8; font-size: 0.9rem; margin: 0; padding-left: 20px;">
                            <li>Groq Backend (Llama 3.3 70B)</li>
                            <li>Skills System (5+ built-in)</li>
                            <li>Unified Skills & Training Tab (7 sub-tabs)</li>
                            <li>OpenAI-Compatible API</li>
                            <li>Modal Deployment</li>
                            <li>Dashboard Integration</li>
                        </ul>
                    </div>
                    <div style="background: rgba(245, 158, 11, 0.1); padding: 15px; border-radius: 10px;">
                        <h4 style="color: #fbbf24; margin-bottom: 10px;">ğŸ”„ In Progress</h4>
                        <ul style="color: #94a3b8; font-size: 0.9rem; margin: 0; padding-left: 20px;">
                            <li>Streaming responses (SSE)</li>
                            <li>LoRA training with Unsloth</li>
                            <li>Voice-specific optimizations</li>
                        </ul>
                    </div>
                    <div style="background: rgba(99, 102, 241, 0.1); padding: 15px; border-radius: 10px;">
                        <h4 style="color: #818cf8; margin-bottom: 10px;">ğŸ“‹ Planned</h4>
                        <ul style="color: #94a3b8; font-size: 0.9rem; margin: 0; padding-left: 20px;">
                            <li>RAG with vector embeddings</li>
                            <li>Multi-turn memory</li>
                            <li>A/B testing for prompts</li>
                            <li>Analytics dashboard</li>
                        </ul>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                        <div>
                            <span style="color: #94a3b8; font-size: 0.85rem;">Base URL:</span>
                            <code style="color: #4ade80; margin-left: 10px;">https://[your-username]--fast-brain-lpu.modal.run</code>
                        </div>
                        <div>
                            <span style="color: #94a3b8; font-size: 0.85rem;">Branch:</span>
                            <code style="color: #fbbf24; margin-left: 10px;">claude/fast-brain-streaming-018wsUb2vztjfkc8EGVQ9t8j</code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Current Architecture -->
            <div class="glass-card" style="margin-bottom: 30px;">
                <div class="card-header">
                    <span class="card-title">ğŸ§  Current Fast Brain Architecture</span>
                </div>
                
                <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 25px; font-family: monospace; font-size: 0.85rem; line-height: 1.8; overflow-x: auto;">
<pre style="color: #e2e8f0; margin: 0;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FAST BRAIN LPU                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚   [User Query] â”€â”€â–º [Skill Selector] â”€â”€â–º [System Prompt Builder] â”€â”€â–º [Groq API]  â”‚
â”‚                           â”‚                      â”‚                      â”‚        â”‚
â”‚                           â–¼                      â–¼                      â–¼        â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                    â”‚   Skills    â”‚        â”‚ Knowledge â”‚         â”‚  Llama    â”‚   â”‚
â”‚                    â”‚  Database   â”‚   +    â”‚   Base    â”‚   =     â”‚ 3.3 70B   â”‚   â”‚
â”‚                    â”‚             â”‚        â”‚           â”‚         â”‚           â”‚   â”‚
â”‚                    â”‚ â€¢ general   â”‚        â”‚ Per-skill â”‚         â”‚ via Groq  â”‚   â”‚
â”‚                    â”‚ â€¢ reception â”‚        â”‚ context   â”‚         â”‚ 800 tok/s â”‚   â”‚
â”‚                    â”‚ â€¢ electric  â”‚        â”‚           â”‚         â”‚  native   â”‚   â”‚
â”‚                    â”‚ â€¢ plumber   â”‚        â”‚           â”‚         â”‚           â”‚   â”‚
â”‚                    â”‚ â€¢ lawyer    â”‚        â”‚           â”‚         â”‚           â”‚   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                        â”‚        â”‚
â”‚                                                                        â–¼        â”‚
â”‚                                                              [Fast Response]    â”‚
â”‚                                                              <span style="color: #4ade80;">~80ms TTFB</span>         â”‚
â”‚                                                              <span style="color: #4ade80;">200+ tok/s</span>         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                </div>
            </div>

            <!-- Fast Brain + LiveKit Integration -->
            <div class="glass-card" style="border: 1px solid #a855f7; margin-bottom: 30px;">
                <div class="card-header">
                    <span class="card-title">ğŸ”— Fast Brain + LiveKit Cloud Integration</span>
                    <span class="card-badge" style="background: rgba(168, 85, 247, 0.2); color: #c4b5fd;">NEW SETUP</span>
                </div>
                
                <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 25px; font-family: monospace; font-size: 0.8rem; line-height: 1.8; overflow-x: auto;">
<pre style="color: #e2e8f0; margin: 0;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    LIVEKIT CLOUD                                          â”‚
â”‚                           (Transport + Noise Cancellation)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                           â”‚
â”‚   ğŸ“ Phone Call                                                                           â”‚
â”‚        â”‚                                                                                  â”‚
â”‚        â–¼                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                     â”‚
â”‚   â”‚  Telnyx SIP     â”‚ â”€â”€â”€ <span style="color: #f59e0b;">$0.004/min</span>                                                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                     â”‚
â”‚            â–¼                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                     â”‚
â”‚   â”‚ ğŸ”‡ Noise Cancel â”‚ â”€â”€â”€ <span style="color: #4ade80;">FREE</span> â”€â”€â”€ Cleans audio before it reaches your worker           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                     â”‚
â”‚            â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ Clean Audio Stream
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     MODAL                                                 â”‚
â”‚                        (Your Worker + Fast Brain = Same Datacenter!)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                         LIVEKIT WORKER (livekit_worker.py)                       â”‚    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚   â”‚                                                                                  â”‚    â”‚
â”‚   â”‚   Audio â”€â”€â–º <span style="color: #60a5fa;">Silero VAD</span> â”€â”€â–º <span style="color: #60a5fa;">Deepgram STT</span> â”€â”€â–º <span style="color: #f59e0b;">Turn Detector</span> â”€â”€â–º <span style="color: #c4b5fd;">Fast Brain</span> â”€â”€â–º <span style="color: #60a5fa;">Cartesia</span>  â”‚    â”‚
â”‚   â”‚              <span style="color: #4ade80;">FREE</span>         <span style="color: #f59e0b;">$0.006/min</span>       <span style="color: #4ade80;">FREE</span>           â”‚            <span style="color: #f59e0b;">~$0.0225/min</span> â”‚    â”‚
â”‚   â”‚              local         YOUR key         ~15ms          â”‚            YOUR key  â”‚    â”‚
â”‚   â”‚                                                            â”‚                      â”‚    â”‚
â”‚   â”‚                                                            â–¼                      â”‚    â”‚
â”‚   â”‚                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚
â”‚   â”‚                                              â”‚     HTTP Call (LOCAL)   â”‚          â”‚    â”‚
â”‚   â”‚                                              â”‚     <span style="color: #4ade80;">~5-10ms latency</span>      â”‚          â”‚    â”‚
â”‚   â”‚                                              â”‚   (same Modal datacenter)â”‚          â”‚    â”‚
â”‚   â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚                           â”‚
â”‚                                                               â–¼                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                         FAST BRAIN LPU (deploy_groq.py)                          â”‚    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚   â”‚                                                                                  â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚   â”‚   â”‚    Skill     â”‚    â”‚   System     â”‚    â”‚   Groq API   â”‚    â”‚   Response   â”‚  â”‚    â”‚
â”‚   â”‚   â”‚   Selector   â”‚â”€â”€â”€â–ºâ”‚   Prompt     â”‚â”€â”€â”€â–ºâ”‚  Llama 3.3   â”‚â”€â”€â”€â–ºâ”‚   Stream     â”‚  â”‚    â”‚
â”‚   â”‚   â”‚              â”‚    â”‚   Builder    â”‚    â”‚    70B       â”‚    â”‚              â”‚  â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚   â”‚         â”‚                    â”‚                   â”‚                   â”‚          â”‚    â”‚
â”‚   â”‚         â–¼                    â–¼                   â–¼                   â–¼          â”‚    â”‚
â”‚   â”‚   <span style="color: #4ade80;">~1ms</span>              <span style="color: #4ade80;">~2ms</span>               <span style="color: #f59e0b;">~80ms TTFB</span>          <span style="color: #4ade80;">200+ tok/s</span>     â”‚    â”‚
â”‚   â”‚                                                                                  â”‚    â”‚
â”‚   â”‚   Skills: general | receptionist | electrician | plumber | lawyer | custom      â”‚    â”‚
â”‚   â”‚                                                                                  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                </div>

                <div style="margin-top: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="background: rgba(168, 85, 247, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #c4b5fd;">~5ms</div>
                        <div style="font-size: 0.8rem; color: #94a3b8;">Worker â†’ Brain (same DC)</div>
                    </div>
                    <div style="background: rgba(245, 158, 11, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #fbbf24;">~80ms</div>
                        <div style="font-size: 0.8rem; color: #94a3b8;">Groq TTFB</div>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #4ade80;">200+</div>
                        <div style="font-size: 0.8rem; color: #94a3b8;">Tokens/sec</div>
                    </div>
                    <div style="background: rgba(99, 102, 241, 0.1); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #818cf8;">âˆ</div>
                        <div style="font-size: 0.8rem; color: #94a3b8;">Custom Skills</div>
                    </div>
                </div>
            </div>

            <!-- Fast Brain Pricing -->
            <div class="pricing-grid" style="margin-bottom: 30px;">
                <div class="glass-card">
                    <h3>ğŸ’° Fast Brain Cost Breakdown</h3>
                    <div class="pricing-row">
                        <span class="label">Groq API (Llama 3.3 70B)</span>
                        <span class="value" style="color: var(--secondary)">FREE tier</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Groq Rate Limit (free)</span>
                        <span class="value">30 req/min</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Modal Compute</span>
                        <span class="value">~$0.001/min</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Cold Start</span>
                        <span class="value">~3 seconds</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Warm Response</span>
                        <span class="value">~80ms TTFB</span>
                    </div>
                    <div class="pricing-row total">
                        <span class="label">Effective Cost</span>
                        <span class="value">~$0.001/min</span>
                    </div>
                </div>

                <div class="glass-card">
                    <h3>âš¡ Fast Brain vs Competitors</h3>
                    <div class="pricing-row">
                        <span class="label">Fast Brain (Groq)</span>
                        <span class="value" style="color: var(--secondary)">80ms / 200 tok/s</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">OpenAI GPT-4</span>
                        <span class="value" style="color: var(--danger)">500ms / 50 tok/s</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Claude Sonnet</span>
                        <span class="value" style="color: var(--accent)">400ms / 80 tok/s</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">Local BitNet</span>
                        <span class="value" style="color: var(--danger)">10s+ / 5 tok/s</span>
                    </div>
                    <div class="pricing-row" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--glass-border);">
                        <span class="label">Your Advantage</span>
                        <span class="value" style="color: var(--secondary)">6x faster than GPT-4</span>
                    </div>
                </div>

                <div class="glass-card">
                    <h3>ğŸ¯ Built-in Skills</h3>
                    <div class="pricing-row">
                        <span class="label">general</span>
                        <span class="value">Default assistant</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">receptionist</span>
                        <span class="value">Phone handling</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">electrician</span>
                        <span class="value">Electrical services</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">plumber</span>
                        <span class="value">Plumbing services</span>
                    </div>
                    <div class="pricing-row">
                        <span class="label">lawyer</span>
                        <span class="value">Legal intake</span>
                    </div>
                    <div class="pricing-row" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--glass-border);">
                        <span class="label">Custom Skills</span>
                        <span class="value" style="color: var(--secondary)">Unlimited via API</span>
                    </div>
                </div>
            </div>

            <!-- Current API Endpoints -->
            <div class="glass-card" style="margin-bottom: 30px;">
                <h3 style="margin-bottom: 20px;">ğŸ“¡ Current Fast Brain API Endpoints</h3>
                
                <div style="display: grid; gap: 20px;">
                    <div style="background: rgba(0,0,0,0.3); border-radius: 10px; padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                            <span style="background: #4ade80; color: #000; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 700;">GET</span>
                            <code style="color: #e2e8f0;">/health</code>
                            <span style="color: #94a3b8; font-size: 0.85rem;">â€” Health check & status</span>
                        </div>
                        <div class="code-block" style="margin: 0;">
<pre><span class="comment">// Response</span>
{
  <span class="string">"status"</span>: <span class="string">"healthy"</span>,
  <span class="string">"model_loaded"</span>: <span class="keyword">true</span>,
  <span class="string">"skills_available"</span>: [<span class="string">"general"</span>, <span class="string">"receptionist"</span>, <span class="string">"electrician"</span>, <span class="string">"plumber"</span>, <span class="string">"lawyer"</span>],
  <span class="string">"version"</span>: <span class="string">"2.0.0"</span>,
  <span class="string">"backend"</span>: <span class="string">"groq-llama-3.3-70b"</span>
}</pre>
                        </div>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); border-radius: 10px; padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                            <span style="background: #60a5fa; color: #000; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 700;">POST</span>
                            <code style="color: #e2e8f0;">/v1/chat/completions</code>
                            <span style="color: #94a3b8; font-size: 0.85rem;">â€” OpenAI-compatible chat (what LiveKit will call)</span>
                        </div>
                        <div class="code-block" style="margin: 0;">
<pre><span class="comment">// Request</span>
{
  <span class="string">"messages"</span>: [{<span class="string">"role"</span>: <span class="string">"user"</span>, <span class="string">"content"</span>: <span class="string">"I need an electrician"</span>}],
  <span class="string">"skill"</span>: <span class="string">"electrician"</span>,          <span class="comment">// â† Skill routing</span>
  <span class="string">"user_profile"</span>: <span class="string">"Jenkintown Electricity - Licensed in Philadelphia"</span>,
  <span class="string">"max_tokens"</span>: 256,
  <span class="string">"temperature"</span>: 0.7
}

<span class="comment">// Response</span>
{
  <span class="string">"choices"</span>: [{<span class="string">"message"</span>: {<span class="string">"role"</span>: <span class="string">"assistant"</span>, <span class="string">"content"</span>: <span class="string">"..."</span>}}],
  <span class="string">"metrics"</span>: {
    <span class="string">"ttfb_ms"</span>: 79.7,
    <span class="string">"total_time_ms"</span>: 557.2,
    <span class="string">"tokens_per_sec"</span>: 213.2
  },
  <span class="string">"skill_used"</span>: <span class="string">"electrician"</span>
}</pre>
                        </div>
                    </div>

                    <div style="background: rgba(0,0,0,0.3); border-radius: 10px; padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                            <span style="background: #60a5fa; color: #000; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 700;">POST</span>
                            <code style="color: #e2e8f0;">/v1/skills</code>
                            <span style="color: #94a3b8; font-size: 0.85rem;">â€” Create custom skill</span>
                        </div>
                        <div class="code-block" style="margin: 0;">
<pre><span class="comment">// Request</span>
{
  <span class="string">"skill_id"</span>: <span class="string">"hvac"</span>,
  <span class="string">"name"</span>: <span class="string">"HVAC Assistant"</span>,
  <span class="string">"description"</span>: <span class="string">"Expert in heating and cooling"</span>,
  <span class="string">"system_prompt"</span>: <span class="string">"You are an AI assistant for ABC HVAC..."</span>,
  <span class="string">"knowledge"</span>: [<span class="string">"Pricing: $150-800"</span>, <span class="string">"Service area: Montgomery County"</span>]
}</pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WHAT NEEDS TO CHANGE -->
            <div class="glass-card" style="border: 2px solid var(--accent); margin-bottom: 30px;">
                <div class="card-header">
                    <span class="card-title">ğŸ”§ What Needs to Change in deploy_groq.py</span>
                    <span class="card-badge badge-todo">TODO</span>
                </div>
                
                <p style="color: #94a3b8; margin-bottom: 20px;">Your Fast Brain is already 90% ready. Here's what to add for LiveKit streaming:</p>
                
                <div style="display: grid; gap: 20px;">
                    <!-- Change 1: Add Streaming Endpoint -->
                    <div style="background: rgba(245, 158, 11, 0.1); border-radius: 12px; padding: 20px; border-left: 4px solid var(--accent);">
                        <h4 style="color: #fbbf24; margin-bottom: 15px;">1ï¸âƒ£ Add SSE Streaming Endpoint</h4>
                        <p style="color: #94a3b8; font-size: 0.9rem; margin-bottom: 15px;">LiveKit needs streaming for real-time voice. Add this to <code>deploy_groq.py</code>:</p>
                        <div class="code-block" style="margin: 0;">
<pre><span class="keyword">from</span> fastapi.responses <span class="keyword">import</span> StreamingResponse
<span class="keyword">import</span> json

<span class="decorator">@app.post</span>(<span class="string">"/v1/chat/completions/stream"</span>)
<span class="keyword">async def</span> <span class="function">chat_completions_stream</span>(request: ChatRequest):
    <span class="string">"""SSE streaming endpoint for LiveKit integration"""</span>
    
    <span class="keyword">async def</span> <span class="function">generate</span>():
        skill = request.skill <span class="keyword">or</span> <span class="string">"receptionist"</span>
        system_prompt = build_system_prompt(skill, request.user_profile)
        
        messages = [{<span class="string">"role"</span>: <span class="string">"system"</span>, <span class="string">"content"</span>: system_prompt}]
        messages.extend([{<span class="string">"role"</span>: m.role, <span class="string">"content"</span>: m.content} <span class="keyword">for</span> m <span class="keyword">in</span> request.messages])
        
        <span class="comment"># Stream from Groq</span>
        stream = groq_client.chat.completions.create(
            model=<span class="string">"llama-3.3-70b-versatile"</span>,
            messages=messages,
            max_tokens=request.max_tokens,
            temperature=request.temperature,
            stream=<span class="keyword">True</span>  <span class="comment"># â† Enable streaming</span>
        )
        
        <span class="keyword">for</span> chunk <span class="keyword">in</span> stream:
            <span class="keyword">if</span> chunk.choices[0].delta.content:
                data = {
                    <span class="string">"choices"</span>: [{
                        <span class="string">"delta"</span>: {<span class="string">"content"</span>: chunk.choices[0].delta.content},
                        <span class="string">"finish_reason"</span>: chunk.choices[0].finish_reason
                    }]
                }
                <span class="keyword">yield</span> f<span class="string">"data: {json.dumps(data)}\n\n"</span>
        
        <span class="keyword">yield</span> <span class="string">"data: [DONE]\n\n"</span>
    
    <span class="keyword">return</span> <span class="function">StreamingResponse</span>(
        <span class="function">generate</span>(),
        media_type=<span class="string">"text/event-stream"</span>,
        headers={<span class="string">"Cache-Control"</span>: <span class="string">"no-cache"</span>}
    )</pre>
                        </div>
                    </div>

                    <!-- Change 2: Add conversation history -->
                    <div style="background: rgba(168, 85, 247, 0.1); border-radius: 12px; padding: 20px; border-left: 4px solid #a855f7;">
                        <h4 style="color: #c4b5fd; margin-bottom: 15px;">2ï¸âƒ£ Add Conversation Memory (Optional but Recommended)</h4>
                        <p style="color: #94a3b8; font-size: 0.9rem; margin-bottom: 15px;">Track multi-turn conversations within a call:</p>
                        <div class="code-block" style="margin: 0;">
<pre><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict

<span class="comment"># In-memory conversation store (per call)</span>
conversations = defaultdict(list)  <span class="comment"># {call_id: [messages]}</span>

<span class="decorator">@app.post</span>(<span class="string">"/v1/chat/completions"</span>)
<span class="keyword">async def</span> <span class="function">chat_completions</span>(request: ChatRequest):
    call_id = request.call_id  <span class="comment"># â† Add to ChatRequest model</span>
    
    <span class="keyword">if</span> call_id:
        <span class="comment"># Append to conversation history</span>
        conversations[call_id].extend(request.messages)
        messages_to_send = conversations[call_id]
    <span class="keyword">else</span>:
        messages_to_send = request.messages
    
    <span class="comment"># ... rest of your code ...</span>
    
    <span class="comment"># After getting response, store assistant message</span>
    <span class="keyword">if</span> call_id:
        conversations[call_id].append({
            <span class="string">"role"</span>: <span class="string">"assistant"</span>,
            <span class="string">"content"</span>: response_content
        })</pre>
                        </div>
                    </div>

                    <!-- Change 3: Voice-optimized responses -->
                    <div style="background: rgba(16, 185, 129, 0.1); border-radius: 12px; padding: 20px; border-left: 4px solid var(--secondary);">
                        <h4 style="color: #4ade80; margin-bottom: 15px;">3ï¸âƒ£ Add Voice-Optimized System Prompt Suffix</h4>
                        <p style="color: #94a3b8; font-size: 0.9rem; margin-bottom: 15px;">Append this to all system prompts for better TTS output:</p>
                        <div class="code-block" style="margin: 0;">
<pre>VOICE_SUFFIX = <span class="string">"""
VOICE RESPONSE RULES:
- Keep responses under 2-3 sentences
- Use contractions (I'm, you're, we'll)
- No bullet points, lists, or markdown
- No emojis or special characters
- Spell out numbers (say "twenty-three" not "23")
- Use natural filler words occasionally (well, so, now)
- End with a question to keep conversation flowing
"""</span>

<span class="keyword">def</span> <span class="function">build_system_prompt</span>(skill: str, user_profile: str = <span class="keyword">None</span>) -> str:
    base_prompt = SKILLS_DB.get(skill, SKILLS_DB[<span class="string">"general"</span>])[<span class="string">"system_prompt"</span>]
    knowledge = SKILLS_DB.get(skill, {}).get(<span class="string">"knowledge"</span>, [])
    
    prompt = base_prompt
    <span class="keyword">if</span> knowledge:
        prompt += f<span class="string">"\n\nKnowledge Base:\n"</span> + <span class="string">"\n"</span>.join(f<span class="string">"- {k}"</span> <span class="keyword">for</span> k <span class="keyword">in</span> knowledge)
    <span class="keyword">if</span> user_profile:
        prompt += f<span class="string">"\n\nBusiness Context: {user_profile}"</span>
    
    prompt += VOICE_SUFFIX  <span class="comment"># â† Add voice optimization</span>
    <span class="keyword">return</span> prompt</pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LiveKit Worker Code -->
            <div class="glass-card" style="margin-bottom: 30px;">
                <h3 style="margin-bottom: 20px;">ğŸ¤– New File: livekit_worker.py</h3>
                <p style="color: #94a3b8; margin-bottom: 20px;">This is the LiveKit agent that connects to your Fast Brain. Deploy alongside Fast Brain on Modal:</p>
                
                <div class="code-block">
<pre><span class="comment"># livekit_worker.py - Deploy to Modal alongside Fast Brain</span>
<span class="keyword">import</span> modal
<span class="keyword">import</span> os
<span class="keyword">import</span> httpx
<span class="keyword">from</span> livekit.agents <span class="keyword">import</span> AutoSubscribe, JobContext, WorkerOptions, cli
<span class="keyword">from</span> livekit.agents.voice_assistant <span class="keyword">import</span> VoiceAssistant
<span class="keyword">from</span> livekit.plugins <span class="keyword">import</span> deepgram, cartesia, silero
<span class="keyword">from</span> livekit.plugins.turn_detector <span class="keyword">import</span> EOUModel

app = modal.<span class="function">App</span>(<span class="string">"hive215-livekit-worker"</span>)

image = modal.<span class="function">Image.debian_slim</span>(python_version=<span class="string">"3.11"</span>).pip_install(
    <span class="string">"livekit-agents>=0.8.0"</span>,
    <span class="string">"livekit-plugins-deepgram"</span>,
    <span class="string">"livekit-plugins-cartesia"</span>,
    <span class="string">"livekit-plugins-silero"</span>,
    <span class="string">"livekit-plugins-turn-detector"</span>,
    <span class="string">"httpx"</span>,
)

<span class="comment"># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<span class="comment"># FAST BRAIN CLIENT - Calls your existing Fast Brain LPU</span>
<span class="comment"># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>

<span class="keyword">class</span> <span class="function">FastBrainLLM</span>:
    <span class="string">"""Adapter to make Fast Brain work as a LiveKit LLM plugin"""</span>
    
    <span class="keyword">def</span> <span class="function">__init__</span>(self, skill: str = <span class="string">"receptionist"</span>, user_profile: str = <span class="keyword">None</span>):
        self.skill = skill
        self.user_profile = user_profile
        self.base_url = os.environ[<span class="string">"FAST_BRAIN_URL"</span>]
        self.client = httpx.<span class="function">AsyncClient</span>(timeout=30.0)
    
    <span class="keyword">async def</span> <span class="function">chat</span>(self, chat_ctx):
        <span class="string">"""Called by LiveKit when user finishes speaking"""</span>
        <span class="comment"># Get the last user message</span>
        messages = [{<span class="string">"role"</span>: m.role, <span class="string">"content"</span>: m.content} <span class="keyword">for</span> m <span class="keyword">in</span> chat_ctx.messages]
        
        <span class="comment"># Call Fast Brain (same Modal datacenter = ~5ms latency!)</span>
        response = <span class="keyword">await</span> self.client.<span class="function">post</span>(
            f<span class="string">"{self.base_url}/v1/chat/completions"</span>,
            json={
                <span class="string">"messages"</span>: messages,
                <span class="string">"skill"</span>: self.skill,
                <span class="string">"user_profile"</span>: self.user_profile,
                <span class="string">"max_tokens"</span>: 150,  <span class="comment"># Keep voice responses short</span>
                <span class="string">"temperature"</span>: 0.7
            }
        )
        
        data = response.<span class="function">json</span>()
        content = data[<span class="string">"choices"</span>][0][<span class="string">"message"</span>][<span class="string">"content"</span>]
        
        <span class="comment"># Yield as single chunk (or implement streaming)</span>
        <span class="keyword">yield</span> content

<span class="comment"># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<span class="comment"># LIVEKIT AGENT ENTRYPOINT</span>
<span class="comment"># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>

<span class="comment"># Skill routing by phone number (instant, no LLM needed)</span>
SKILL_BY_NUMBER = {
    <span class="string">"+12155551234"</span>: <span class="string">"electrician"</span>,   <span class="comment"># Jenkintown Electricity</span>
    <span class="string">"+12155555678"</span>: <span class="string">"plumber"</span>,       <span class="comment"># Joe's Plumbing</span>
    <span class="string">"+12155559999"</span>: <span class="string">"lawyer"</span>,        <span class="comment"># Smith Law Office</span>
    <span class="comment"># Add more as customers sign up...</span>
}

<span class="keyword">async def</span> <span class="function">entrypoint</span>(ctx: JobContext):
    <span class="string">"""Main agent logic - runs for each phone call"""</span>
    
    <span class="comment"># Get skill from SIP trunk phone number (INSTANT - ~0ms)</span>
    <span class="comment"># This is the key optimization: no LLM classification needed!</span>
    trunk_number = ctx.room.metadata.get(<span class="string">"sip.trunkPhoneNumber"</span>)
    skill = SKILL_BY_NUMBER.get(trunk_number, <span class="string">"receptionist"</span>)
    
    <span class="comment"># Get customer_id from metadata (set by your dashboard when creating room)</span>
    customer_id = ctx.room.metadata.get(<span class="string">"customer_id"</span>)
    
    <span class="comment"># TODO: Fetch customer profile from Supabase</span>
    <span class="comment"># user_profile = await fetch_customer_profile(customer_id)</span>
    user_profile = <span class="string">"Jenkintown Electricity - Licensed electrician serving Montgomery County, PA"</span>
    
    <span class="comment"># Connect to the room</span>
    <span class="keyword">await</span> ctx.<span class="function">connect</span>(auto_subscribe=AutoSubscribe.AUDIO_ONLY)
    
    <span class="comment"># Create voice assistant with your components</span>
    assistant = <span class="function">VoiceAssistant</span>(
        vad=silero.VAD.<span class="function">load</span>(),                                    <span class="comment"># FREE - Voice Activity Detection</span>
        stt=deepgram.<span class="function">STT</span>(api_key=os.environ[<span class="string">"DEEPGRAM_API_KEY"</span>]),  <span class="comment"># YOUR KEY</span>
        llm=<span class="function">FastBrainLLM</span>(skill=skill, user_profile=user_profile),   <span class="comment"># YOUR BRAIN</span>
        tts=cartesia.<span class="function">TTS</span>(api_key=os.environ[<span class="string">"CARTESIA_API_KEY"</span>]),  <span class="comment"># YOUR KEY</span>
        turn_detection=<span class="function">EOUModel</span>(),                                  <span class="comment"># FREE - End of utterance</span>
    )
    
    <span class="comment"># Start the assistant</span>
    assistant.<span class="function">start</span>(ctx.room)
    
    <span class="comment"># Initial greeting</span>
    <span class="keyword">await</span> assistant.<span class="function">say</span>(
        <span class="string">"Hey, thanks for calling! How can I help you today?"</span>,
        allow_interruptions=<span class="keyword">True</span>
    )
    
    <span class="comment"># Keep running until call ends</span>
    <span class="keyword">await</span> ctx.room.<span class="function">wait_until_disconnected</span>()

<span class="comment"># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<span class="comment"># MODAL DEPLOYMENT</span>
<span class="comment"># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>

<span class="decorator">@app.function</span>(
    image=image,
    secrets=[
        modal.Secret.from_name(<span class="string">"deepgram-api-key"</span>),
        modal.Secret.from_name(<span class="string">"cartesia-api-key"</span>),
        modal.Secret.from_name(<span class="string">"livekit-credentials"</span>),
        modal.Secret.from_name(<span class="string">"fast-brain-url"</span>),
    ],
    keep_warm=1,  <span class="comment"># Always have one worker ready</span>
)
<span class="keyword">def</span> <span class="function">run_worker</span>():
    <span class="string">"""Run the LiveKit worker"""</span>
    cli.<span class="function">run_app</span>(
        <span class="function">WorkerOptions</span>(
            entrypoint_fnc=entrypoint,
            api_key=os.environ[<span class="string">"LIVEKIT_API_KEY"</span>],
            api_secret=os.environ[<span class="string">"LIVEKIT_API_SECRET"</span>],
            ws_url=os.environ[<span class="string">"LIVEKIT_URL"</span>],
        )
    )</pre>
                </div>
            </div>

            <!-- Fast Brain Migration Checklist -->
            <div class="glass-card" style="border: 1px solid #a855f7;">
                <h3 style="margin-bottom: 20px;">âœ… Fast Brain Migration Checklist</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div>
                        <h4 style="color: #c4b5fd; margin-bottom: 15px;">1. Verify Current Deployment</h4>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Fast Brain live at Modal URL</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>GET /health</code> returns 200</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>All 5 skills responding</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>~80ms TTFB confirmed</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="color: #c4b5fd; margin-bottom: 15px;">2. Update deploy_groq.py</h4>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Add <code>/v1/chat/completions/stream</code></span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Add VOICE_SUFFIX to prompts</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Add call_id for conversation memory</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>modal deploy fast_brain/deploy_groq.py</code></span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="color: #c4b5fd; margin-bottom: 15px;">3. Create LiveKit Worker</h4>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Create <code>livekit_worker.py</code></span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Add FastBrainLLM adapter class</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Wire up skill routing from room name</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Add initial greeting message</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="color: #c4b5fd; margin-bottom: 15px;">4. Modal Secrets (7 total)</h4>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>GROQ_API_KEY</code> (existing)</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>FAST_BRAIN_URL</code> (your Modal URL)</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>DEEPGRAM_API_KEY</code> â† YOUR key</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>CARTESIA_API_KEY</code> â† YOUR key</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>LIVEKIT_URL</code></span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>LIVEKIT_API_KEY</code></span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>LIVEKIT_API_SECRET</code></span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="color: #c4b5fd; margin-bottom: 15px;">5. Deploy & Test</h4>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>modal deploy livekit_worker.py</code></span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Worker connects to LiveKit Cloud</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Test call â†’ hear greeting</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Test each skill via room name</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Verify &lt;300ms end-to-end latency</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="color: #c4b5fd; margin-bottom: 15px;">6. Optimize (Week 2)</h4>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Enable <code>keep_warm=1</code> on both</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Add response caching for common Q's</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Monitor Groq rate limits (30/min free)</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Add customer profile lookup</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Terminal Commands -->
                <div style="margin-top: 30px; background: rgba(0,0,0,0.4); border-radius: 10px; padding: 20px;">
                    <h4 style="color: #94a3b8; margin-bottom: 15px;">ğŸ“Ÿ Quick Commands</h4>
                    <div class="code-block" style="margin: 0;">
<pre><span class="comment"># 1. Set up Modal secrets (run once)</span>
modal secret create deepgram-api-key DEEPGRAM_API_KEY=your_key
modal secret create cartesia-api-key CARTESIA_API_KEY=your_key
modal secret create livekit-credentials \
    LIVEKIT_URL=wss://your-app.livekit.cloud \
    LIVEKIT_API_KEY=your_key \
    LIVEKIT_API_SECRET=your_secret
modal secret create fast-brain-url FAST_BRAIN_URL=https://yourname--fast-brain-lpu.modal.run

<span class="comment"># 2. Deploy updated Fast Brain</span>
modal deploy fast_brain/deploy_groq.py

<span class="comment"># 3. Deploy LiveKit Worker</span>
modal deploy livekit_worker.py

<span class="comment"># 4. Test Fast Brain directly</span>
curl -X POST https://yourname--fast-brain-lpu.modal.run/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{"messages":[{"role":"user","content":"test"}],"skill":"electrician"}'

<span class="comment"># 5. Check Modal logs</span>
modal app logs fast-brain-lpu
modal app logs hive215-livekit-worker</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Critical Warning -->
        <section style="margin-top: 60px;">
            <div class="glass-card" style="border: 2px solid var(--danger); background: rgba(239, 68, 68, 0.1);">
                <div style="display: flex; align-items: flex-start; gap: 20px;">
                    <div style="font-size: 3rem;">âš ï¸</div>
                    <div>
                        <h3 style="color: #fca5a5; font-size: 1.4rem; margin-bottom: 15px;">CRITICAL: Use Your Own API Keys</h3>
                        <p style="color: #e2e8f0; line-height: 1.8; margin-bottom: 20px;">
                            <strong>DO NOT</strong> use LiveKit's "Inference Gateway" (where LiveKit pays the OpenAI/Deepgram bill). 
                            If you do, you'll be hit with the <strong>free tier limits</strong> (5 concurrent sessions, limited inference credits).
                        </p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div style="background: rgba(239, 68, 68, 0.2); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #fca5a5; margin-bottom: 10px;">âŒ DON'T DO THIS</h4>
                                <div class="code-block" style="margin: 0;">
<pre><span class="comment"># Using LiveKit's inference = LIMITED</span>
<span class="keyword">from</span> livekit.plugins <span class="keyword">import</span> openai, deepgram

<span class="comment"># These use LiveKit's API keys</span>
<span class="comment"># You're limited to their free tier!</span>
stt = deepgram.<span class="function">STT</span>()  <span class="comment"># â† No key = their bill</span>
llm = openai.<span class="function">LLM</span>()    <span class="comment"># â† No key = their bill</span></pre>
                                </div>
                            </div>
                            <div style="background: rgba(16, 185, 129, 0.2); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #6ee7b7; margin-bottom: 10px;">âœ… DO THIS INSTEAD</h4>
                                <div class="code-block" style="margin: 0;">
<pre><span class="comment"># Using YOUR keys = UNLIMITED</span>
<span class="keyword">import</span> os

<span class="comment"># Your keys from Modal secrets</span>
stt = deepgram.<span class="function">STT</span>(
    api_key=os.environ[<span class="string">"DEEPGRAM_API_KEY"</span>]
)
tts = cartesia.<span class="function">TTS</span>(
    api_key=os.environ[<span class="string">"CARTESIA_API_KEY"</span>]
)</pre>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 20px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
                            <p style="color: #94a3b8; font-size: 0.9rem;">
                                <strong style="color: #fff;">Why this matters:</strong> With your own keys, your Modal workers count as "participants" (100 concurrent on free tier), 
                                NOT as "agent sessions" (5 concurrent on free tier). This is how you run unlimited personas without hitting limits.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Migration Steps -->
        <section class="migration-section">
            <h2 class="section-title">Migration Checklist</h2>

            <!-- Progress -->
            <div class="progress-section">
                <div class="progress-header">
                    <span class="progress-title">Migration Progress</span>
                    <span class="progress-percent" id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <div class="steps-grid">
                <div class="glass-card migration-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Create LiveKit Cloud Account</h3>
                        <p>Sign up at <code>cloud.livekit.io</code> and create a new project. Get your API keys.</p>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Create account</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Create project "hive215"</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Copy API Key & Secret</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card migration-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Configure Telnyx SIP Trunk</h3>
                        <p>Point your Telnyx numbers to LiveKit via SIP. This is how calls reach LiveKit.</p>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Create SIP Credential in LiveKit</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Configure Telnyx outbound voice profile</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Test inbound call routing</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card migration-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Create Modal Worker</h3>
                        <p>Deploy your agent code to Modal. This is where turn detection and Fast Brain run.</p>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Create <code>livekit_worker.py</code></span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Add turn detector plugin</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Connect Fast Brain client</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Deploy: <code>modal deploy</code></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card migration-step" style="border: 1px solid var(--accent);">
                    <div class="step-number" style="background: linear-gradient(135deg, var(--accent), var(--danger));">4</div>
                    <div class="step-content">
                        <h3>âš¡ Add YOUR API Keys to Modal Secrets</h3>
                        <p><strong style="color: var(--accent);">CRITICAL:</strong> Store your OWN Deepgram and Cartesia keys in Modal secrets. This bypasses LiveKit's inference limits entirely.</p>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>DEEPGRAM_API_KEY</code> â€” Your key, your bill</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>CARTESIA_API_KEY</code> â€” Your key, your bill</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>LIVEKIT_URL</code></span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>LIVEKIT_API_KEY</code></span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span><code>LIVEKIT_API_SECRET</code></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card migration-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h3>Setup Dispatch Rules</h3>
                        <p>Route calls to different skills based on room name or phone number.</p>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Configure room naming: <code>room_{skill}_{id}</code></span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Create dispatch logic in worker</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Test each skill persona</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card migration-step">
                    <div class="step-number">6</div>
                    <div class="step-content">
                        <h3>Update Dashboard</h3>
                        <p>Connect your Vercel dashboard to the new LiveKit backend.</p>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Update API endpoints</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Add LiveKit room token generation</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Test call flow end-to-end</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card migration-step">
                    <div class="step-number">7</div>
                    <div class="step-content">
                        <h3>Deprecate Railway</h3>
                        <p>Once everything works, shut down the old Railway deployment.</p>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Run parallel for 1 week</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Monitor for errors</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Delete Railway service</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Cancel Railway subscription</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card migration-step">
                    <div class="step-number">ğŸ‰</div>
                    <div class="step-content">
                        <h3>Go Live!</h3>
                        <p>Celebrate your faster, cheaper, simpler voice AI stack!</p>
                        <div class="checklist">
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Make first production call</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Get first paying customer</span>
                            </div>
                            <div class="check-item" onclick="toggleCheck(this)">
                                <div class="check-box"></div>
                                <span>Hit 10 customers</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievements -->
        <section style="margin-top: 60px;">
            <h2 class="section-title">Achievements</h2>
            <div class="achievements">
                <div class="achievement unlocked">
                    <div class="achievement-icon">ğŸ—ï¸</div>
                    <div class="achievement-info">
                        <h4>Architect</h4>
                        <p>Designed the HIVE215 stack</p>
                    </div>
                </div>
                <div class="achievement unlocked">
                    <div class="achievement-icon">ğŸ§ </div>
                    <div class="achievement-info">
                        <h4>Brain Builder</h4>
                        <p>Created Fast Brain LPU</p>
                    </div>
                </div>
                <div class="achievement">
                    <div class="achievement-icon">ğŸš€</div>
                    <div class="achievement-info">
                        <h4>Live Launch</h4>
                        <p>First call on new stack</p>
                    </div>
                </div>
                <div class="achievement">
                    <div class="achievement-icon">ğŸ’°</div>
                    <div class="achievement-info">
                        <h4>First Dollar</h4>
                        <p>First paying customer</p>
                    </div>
                </div>
                <div class="achievement">
                    <div class="achievement-icon">ğŸ”Ÿ</div>
                    <div class="achievement-info">
                        <h4>Double Digits</h4>
                        <p>10 active customers</p>
                    </div>
                </div>
                <div class="achievement">
                    <div class="achievement-icon">ğŸ’¯</div>
                    <div class="achievement-info">
                        <h4>Century Club</h4>
                        <p>100 active customers</p>
                    </div>
                </div>
                <div class="achievement">
                    <div class="achievement-icon">ğŸ†</div>
                    <div class="achievement-info">
                        <h4>$10K MRR</h4>
                        <p>Monthly recurring revenue</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA -->
        <section class="cta-section">
            <h2 class="cta-title">Ready to Ship?</h2>
            <p class="cta-subtitle">Your voice AI stack is designed. Now let's build it.</p>
            <div class="cta-buttons">
                <a href="https://cloud.livekit.io" target="_blank" class="btn btn-primary">Start LiveKit Cloud â†’</a>
                <a href="https://modal.com" target="_blank" class="btn btn-secondary">Setup Modal</a>
            </div>
        </section>

        <!-- Footer -->
        <footer style="text-align: center; margin-top: 60px; padding: 30px; color: #64748b; font-size: 0.85rem;">
            <p>HIVE215 Architecture Overview â€¢ Built by Armand â€¢ Lefebvre Design Solutions</p>
            <p style="margin-top: 10px;">50% faster â€¢ 27% cheaper â€¢ 100% your voice</p>
        </footer>
    </div>

    <script>
        // Checklist functionality
        function toggleCheck(element) {
            const checkbox = element.querySelector('.check-box');
            checkbox.classList.toggle('checked');
            updateProgress();
            saveProgress();
        }

        function updateProgress() {
            const total = document.querySelectorAll('.check-box').length;
            const checked = document.querySelectorAll('.check-box.checked').length;
            const percent = Math.round((checked / total) * 100);
            
            document.getElementById('progressPercent').textContent = percent + '%';
            document.getElementById('progressFill').style.width = percent + '%';

            // Unlock achievements based on progress
            const achievements = document.querySelectorAll('.achievement');
            if (percent >= 30) achievements[2].classList.add('unlocked');
            if (percent >= 50) achievements[3].classList.add('unlocked');
            if (percent >= 70) achievements[4].classList.add('unlocked');
            if (percent >= 90) achievements[5].classList.add('unlocked');
            if (percent >= 100) achievements[6].classList.add('unlocked');
        }

        function saveProgress() {
            const checks = [];
            document.querySelectorAll('.check-box').forEach((box, i) => {
                checks[i] = box.classList.contains('checked');
            });
            localStorage.setItem('hive215-progress', JSON.stringify(checks));
        }

        function loadProgress() {
            const saved = localStorage.getItem('hive215-progress');
            if (saved) {
                const checks = JSON.parse(saved);
                document.querySelectorAll('.check-box').forEach((box, i) => {
                    if (checks[i]) box.classList.add('checked');
                });
            }
            updateProgress();
        }

        // Load on page ready
        document.addEventListener('DOMContentLoaded', loadProgress);

        // Animate stats on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.glass-card, .stat').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'all 0.6s ease';
            observer.observe(el);
        });
    </script>
</body>
</html>
